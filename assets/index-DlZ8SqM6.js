(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Jr(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function fe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Jr(Object(t),!0).forEach(function(r){Uo(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Jr(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function dn(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?dn=function(e){return typeof e}:dn=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dn(n)}function Uo(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _e(){return _e=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_e.apply(this,arguments)}function Bo(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function qo(n,e){if(n==null)return{};var t=Bo(n,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}var Ko="1.15.6";function me(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}var we=me(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),qt=me(/Edge/i),Yr=me(/firefox/i),xt=me(/safari/i)&&!me(/chrome/i)&&!me(/android/i),_r=me(/iP(ad|od|hone)/i),ii=me(/chrome/i)&&me(/android/i),oi={capture:!1,passive:!1};function I(n,e,t){n.addEventListener(e,t,!we&&oi)}function D(n,e,t){n.removeEventListener(e,t,!we&&oi)}function yn(n,e){if(e){if(e[0]===">"&&(e=e.substring(1)),n)try{if(n.matches)return n.matches(e);if(n.msMatchesSelector)return n.msMatchesSelector(e);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(e)}catch{return!1}return!1}}function ai(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function le(n,e,t,r){if(n){t=t||document;do{if(e!=null&&(e[0]===">"?n.parentNode===t&&yn(n,e):yn(n,e))||r&&n===t)return n;if(n===t)break}while(n=ai(n))}return null}var Xr=/\s+/g;function re(n,e,t){if(n&&e)if(n.classList)n.classList[t?"add":"remove"](e);else{var r=(" "+n.className+" ").replace(Xr," ").replace(" "+e+" "," ");n.className=(r+(t?" "+e:"")).replace(Xr," ")}}function E(n,e,t){var r=n&&n.style;if(r){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(t=n.currentStyle),e===void 0?t:t[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=t+(typeof t=="string"?"":"px")}}function Ze(n,e){var t="";if(typeof n=="string")t=n;else do{var r=E(n,"transform");r&&r!=="none"&&(t=r+" "+t)}while(!e&&(n=n.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(t)}function li(n,e,t){if(n){var r=n.getElementsByTagName(e),s=0,i=r.length;if(t)for(;s<i;s++)t(r[s],s);return r}return[]}function he(){var n=document.scrollingElement;return n||document.documentElement}function U(n,e,t,r,s){if(!(!n.getBoundingClientRect&&n!==window)){var i,o,a,l,u,c,d;if(n!==window&&n.parentNode&&n!==he()?(i=n.getBoundingClientRect(),o=i.top,a=i.left,l=i.bottom,u=i.right,c=i.height,d=i.width):(o=0,a=0,l=window.innerHeight,u=window.innerWidth,c=window.innerHeight,d=window.innerWidth),(e||t)&&n!==window&&(s=s||n.parentNode,!we))do if(s&&s.getBoundingClientRect&&(E(s,"transform")!=="none"||t&&E(s,"position")!=="static")){var h=s.getBoundingClientRect();o-=h.top+parseInt(E(s,"border-top-width")),a-=h.left+parseInt(E(s,"border-left-width")),l=o+i.height,u=a+i.width;break}while(s=s.parentNode);if(r&&n!==window){var f=Ze(s||n),p=f&&f.a,g=f&&f.d;f&&(o/=g,a/=p,d/=p,c/=g,l=o+c,u=a+d)}return{top:o,left:a,bottom:l,right:u,width:d,height:c}}}function Qr(n,e,t){for(var r=xe(n,!0),s=U(n)[e];r;){var i=U(r)[t],o=void 0;if(o=s>=i,!o)return r;if(r===he())break;r=xe(r,!1)}return!1}function nt(n,e,t,r){for(var s=0,i=0,o=n.children;i<o.length;){if(o[i].style.display!=="none"&&o[i]!==A.ghost&&(r||o[i]!==A.dragged)&&le(o[i],t.draggable,n,!1)){if(s===e)return o[i];s++}i++}return null}function br(n,e){for(var t=n.lastElementChild;t&&(t===A.ghost||E(t,"display")==="none"||e&&!yn(t,e));)t=t.previousElementSibling;return t||null}function oe(n,e){var t=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==A.clone&&(!e||yn(n,e))&&t++;return t}function Zr(n){var e=0,t=0,r=he();if(n)do{var s=Ze(n),i=s.a,o=s.d;e+=n.scrollLeft*i,t+=n.scrollTop*o}while(n!==r&&(n=n.parentNode));return[e,t]}function zo(n,e){for(var t in n)if(n.hasOwnProperty(t)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===n[t][r])return Number(t)}return-1}function xe(n,e){if(!n||!n.getBoundingClientRect)return he();var t=n,r=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var s=E(t);if(t.clientWidth<t.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return he();if(r||e)return t;r=!0}}while(t=t.parentNode);return he()}function Go(n,e){if(n&&e)for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function $n(n,e){return Math.round(n.top)===Math.round(e.top)&&Math.round(n.left)===Math.round(e.left)&&Math.round(n.height)===Math.round(e.height)&&Math.round(n.width)===Math.round(e.width)}var Dt;function ui(n,e){return function(){if(!Dt){var t=arguments,r=this;t.length===1?n.call(r,t[0]):n.apply(r,t),Dt=setTimeout(function(){Dt=void 0},e)}}}function Wo(){clearTimeout(Dt),Dt=void 0}function ci(n,e,t){n.scrollLeft+=e,n.scrollTop+=t}function di(n){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(n).cloneNode(!0):t?t(n).clone(!0)[0]:n.cloneNode(!0)}function hi(n,e,t){var r={};return Array.from(n.children).forEach(function(s){var i,o,a,l;if(!(!le(s,e.draggable,n,!1)||s.animated||s===t)){var u=U(s);r.left=Math.min((i=r.left)!==null&&i!==void 0?i:1/0,u.left),r.top=Math.min((o=r.top)!==null&&o!==void 0?o:1/0,u.top),r.right=Math.max((a=r.right)!==null&&a!==void 0?a:-1/0,u.right),r.bottom=Math.max((l=r.bottom)!==null&&l!==void 0?l:-1/0,u.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var te="Sortable"+new Date().getTime();function Ho(){var n=[],e;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(s){if(!(E(s,"display")==="none"||s===A.ghost)){n.push({target:s,rect:U(s)});var i=fe({},n[n.length-1].rect);if(s.thisAnimationDuration){var o=Ze(s,!0);o&&(i.top-=o.f,i.left-=o.e)}s.fromRect=i}})}},addAnimationState:function(r){n.push(r)},removeAnimationState:function(r){n.splice(zo(n,{target:r}),1)},animateAll:function(r){var s=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var i=!1,o=0;n.forEach(function(a){var l=0,u=a.target,c=u.fromRect,d=U(u),h=u.prevFromRect,f=u.prevToRect,p=a.rect,g=Ze(u,!0);g&&(d.top-=g.f,d.left-=g.e),u.toRect=d,u.thisAnimationDuration&&$n(h,d)&&!$n(c,d)&&(p.top-d.top)/(p.left-d.left)===(c.top-d.top)/(c.left-d.left)&&(l=Yo(p,h,f,s.options)),$n(d,c)||(u.prevFromRect=c,u.prevToRect=d,l||(l=s.options.animation),s.animate(u,p,d,l)),l&&(i=!0,o=Math.max(o,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(e),i?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),n=[]},animate:function(r,s,i,o){if(o){E(r,"transition",""),E(r,"transform","");var a=Ze(this.el),l=a&&a.a,u=a&&a.d,c=(s.left-i.left)/(l||1),d=(s.top-i.top)/(u||1);r.animatingX=!!c,r.animatingY=!!d,E(r,"transform","translate3d("+c+"px,"+d+"px,0)"),this.forRepaintDummy=Jo(r),E(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),E(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){E(r,"transition",""),E(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function Jo(n){return n.offsetWidth}function Yo(n,e,t,r){return Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*r.animation}var ze=[],Mn={initializeByDefault:!0},Kt={mount:function(e){for(var t in Mn)Mn.hasOwnProperty(t)&&!(t in e)&&(e[t]=Mn[t]);ze.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),ze.push(e)},pluginEvent:function(e,t,r){var s=this;this.eventCanceled=!1,r.cancel=function(){s.eventCanceled=!0};var i=e+"Global";ze.forEach(function(o){t[o.pluginName]&&(t[o.pluginName][i]&&t[o.pluginName][i](fe({sortable:t},r)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](fe({sortable:t},r)))})},initializePlugins:function(e,t,r,s){ze.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var u=new a(e,t,e.options);u.sortable=e,u.options=e.options,e[l]=u,_e(r,u.defaults)}});for(var i in e.options)if(e.options.hasOwnProperty(i)){var o=this.modifyOption(e,i,e.options[i]);typeof o<"u"&&(e.options[i]=o)}},getEventProperties:function(e,t){var r={};return ze.forEach(function(s){typeof s.eventProperties=="function"&&_e(r,s.eventProperties.call(t[s.pluginName],e))}),r},modifyOption:function(e,t,r){var s;return ze.forEach(function(i){e[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[t]=="function"&&(s=i.optionListeners[t].call(e[i.pluginName],r))}),s}};function Xo(n){var e=n.sortable,t=n.rootEl,r=n.name,s=n.targetEl,i=n.cloneEl,o=n.toEl,a=n.fromEl,l=n.oldIndex,u=n.newIndex,c=n.oldDraggableIndex,d=n.newDraggableIndex,h=n.originalEvent,f=n.putSortable,p=n.extraEventProperties;if(e=e||t&&t[te],!!e){var g,m=e.options,v="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!we&&!qt?g=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(r,!0,!0)),g.to=o||t,g.from=a||t,g.item=s||t,g.clone=i,g.oldIndex=l,g.newIndex=u,g.oldDraggableIndex=c,g.newDraggableIndex=d,g.originalEvent=h,g.pullMode=f?f.lastPutMode:void 0;var b=fe(fe({},p),Kt.getEventProperties(r,e));for(var S in b)g[S]=b[S];t&&t.dispatchEvent(g),m[v]&&m[v].call(e,g)}}var Qo=["evt"],Z=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=r.evt,i=qo(r,Qo);Kt.pluginEvent.bind(A)(e,t,fe({dragEl:y,parentEl:V,ghostEl:P,rootEl:M,nextEl:$e,lastDownEl:hn,cloneEl:L,cloneHidden:Oe,dragStarted:At,putSortable:W,activeSortable:A.active,originalEvent:s,oldIndex:Xe,oldDraggableIndex:Rt,newIndex:se,newDraggableIndex:ke,hideGhostForTarget:mi,unhideGhostForTarget:yi,cloneNowHidden:function(){Oe=!0},cloneNowShown:function(){Oe=!1},dispatchSortableEvent:function(a){Y({sortable:t,name:a,originalEvent:s})}},i))};function Y(n){Xo(fe({putSortable:W,cloneEl:L,targetEl:y,rootEl:M,oldIndex:Xe,oldDraggableIndex:Rt,newIndex:se,newDraggableIndex:ke},n))}var y,V,P,M,$e,hn,L,Oe,Xe,se,Rt,ke,Zt,W,Ye=!1,vn=!1,_n=[],Re,ae,Ln,Vn,es,ts,At,Ge,It,jt=!1,en=!1,fn,H,Fn=[],Xn=!1,bn=[],Cn=typeof document<"u",tn=_r,ns=qt||we?"cssFloat":"float",Zo=Cn&&!ii&&!_r&&"draggable"in document.createElement("div"),fi=function(){if(Cn){if(we)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),pi=function(e,t){var r=E(e),s=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),i=nt(e,0,t),o=nt(e,1,t),a=i&&E(i),l=o&&E(o),u=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+U(i).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+U(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&a.float&&a.float!=="none"){var d=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===d)?"vertical":"horizontal"}return i&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||u>=s&&r[ns]==="none"||o&&r[ns]==="none"&&u+c>s)?"vertical":"horizontal"},ea=function(e,t,r){var s=r?e.left:e.top,i=r?e.right:e.bottom,o=r?e.width:e.height,a=r?t.left:t.top,l=r?t.right:t.bottom,u=r?t.width:t.height;return s===a||i===l||s+o/2===a+u/2},ta=function(e,t){var r;return _n.some(function(s){var i=s[te].options.emptyInsertThreshold;if(!(!i||br(s))){var o=U(s),a=e>=o.left-i&&e<=o.right+i,l=t>=o.top-i&&t<=o.bottom+i;if(a&&l)return r=s}}),r},gi=function(e){function t(i,o){return function(a,l,u,c){var d=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(i==null&&(o||d))return!0;if(i==null||i===!1)return!1;if(o&&i==="clone")return i;if(typeof i=="function")return t(i(a,l,u,c),o)(a,l,u,c);var h=(o?a:l).options.group.name;return i===!0||typeof i=="string"&&i===h||i.join&&i.indexOf(h)>-1}}var r={},s=e.group;(!s||dn(s)!="object")&&(s={name:s}),r.name=s.name,r.checkPull=t(s.pull,!0),r.checkPut=t(s.put),r.revertClone=s.revertClone,e.group=r},mi=function(){!fi&&P&&E(P,"display","none")},yi=function(){!fi&&P&&E(P,"display","")};Cn&&!ii&&document.addEventListener("click",function(n){if(vn)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),vn=!1,!1},!0);var Ie=function(e){if(y){e=e.touches?e.touches[0]:e;var t=ta(e.clientX,e.clientY);if(t){var r={};for(var s in e)e.hasOwnProperty(s)&&(r[s]=e[s]);r.target=r.rootEl=t,r.preventDefault=void 0,r.stopPropagation=void 0,t[te]._onDragOver(r)}}},na=function(e){y&&y.parentNode[te]._isOutsideThisEl(e.target)};function A(n,e){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=e=_e({},e),n[te]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return pi(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:A.supportPointer!==!1&&"PointerEvent"in window&&(!xt||_r),emptyInsertThreshold:5};Kt.initializePlugins(this,n,t);for(var r in t)!(r in e)&&(e[r]=t[r]);gi(e);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=e.forceFallback?!1:Zo,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?I(n,"pointerdown",this._onTapStart):(I(n,"mousedown",this._onTapStart),I(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(I(n,"dragover",this),I(n,"dragenter",this)),_n.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),_e(this,Ho())}A.prototype={constructor:A,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Ge=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,y):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,r=this.el,s=this.options,i=s.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,c=s.filter;if(ca(r),!y&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||s.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&xt&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=le(l,s.draggable,r,!1),!(l&&l.animated)&&hn!==l)){if(Xe=oe(l),Rt=oe(l,s.draggable),typeof c=="function"){if(c.call(this,e,l,this)){Y({sortable:t,rootEl:u,name:"filter",targetEl:l,toEl:r,fromEl:r}),Z("filter",t,{evt:e}),i&&e.preventDefault();return}}else if(c&&(c=c.split(",").some(function(d){if(d=le(u,d.trim(),r,!1),d)return Y({sortable:t,rootEl:d,name:"filter",targetEl:l,fromEl:r,toEl:r}),Z("filter",t,{evt:e}),!0}),c)){i&&e.preventDefault();return}s.handle&&!le(u,s.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,t,r){var s=this,i=s.el,o=s.options,a=i.ownerDocument,l;if(r&&!y&&r.parentNode===i){var u=U(r);if(M=i,y=r,V=y.parentNode,$e=y.nextSibling,hn=r,Zt=o.group,A.dragged=y,Re={target:y,clientX:(t||e).clientX,clientY:(t||e).clientY},es=Re.clientX-u.left,ts=Re.clientY-u.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,y.style["will-change"]="all",l=function(){if(Z("delayEnded",s,{evt:e}),A.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!Yr&&s.nativeDraggable&&(y.draggable=!0),s._triggerDragStart(e,t),Y({sortable:s,name:"choose",originalEvent:e}),re(y,o.chosenClass,!0)},o.ignore.split(",").forEach(function(c){li(y,c.trim(),Nn)}),I(a,"dragover",Ie),I(a,"mousemove",Ie),I(a,"touchmove",Ie),o.supportPointer?(I(a,"pointerup",s._onDrop),!this.nativeDraggable&&I(a,"pointercancel",s._onDrop)):(I(a,"mouseup",s._onDrop),I(a,"touchend",s._onDrop),I(a,"touchcancel",s._onDrop)),Yr&&this.nativeDraggable&&(this.options.touchStartThreshold=4,y.draggable=!0),Z("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(qt||we))){if(A.eventCanceled){this._onDrop();return}o.supportPointer?(I(a,"pointerup",s._disableDelayedDrag),I(a,"pointercancel",s._disableDelayedDrag)):(I(a,"mouseup",s._disableDelayedDrag),I(a,"touchend",s._disableDelayedDrag),I(a,"touchcancel",s._disableDelayedDrag)),I(a,"mousemove",s._delayedDragTouchMoveHandler),I(a,"touchmove",s._delayedDragTouchMoveHandler),o.supportPointer&&I(a,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){y&&Nn(y),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;D(e,"mouseup",this._disableDelayedDrag),D(e,"touchend",this._disableDelayedDrag),D(e,"touchcancel",this._disableDelayedDrag),D(e,"pointerup",this._disableDelayedDrag),D(e,"pointercancel",this._disableDelayedDrag),D(e,"mousemove",this._delayedDragTouchMoveHandler),D(e,"touchmove",this._delayedDragTouchMoveHandler),D(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?I(document,"pointermove",this._onTouchMove):t?I(document,"touchmove",this._onTouchMove):I(document,"mousemove",this._onTouchMove):(I(y,"dragend",this),I(M,"dragstart",this._onDragStart));try{document.selection?pn(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Ye=!1,M&&y){Z("dragStarted",this,{evt:t}),this.nativeDraggable&&I(document,"dragover",na);var r=this.options;!e&&re(y,r.dragClass,!1),re(y,r.ghostClass,!0),A.active=this,e&&this._appendGhost(),Y({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ae){this._lastX=ae.clientX,this._lastY=ae.clientY,mi();for(var e=document.elementFromPoint(ae.clientX,ae.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ae.clientX,ae.clientY),e!==t);)t=e;if(y.parentNode[te]._isOutsideThisEl(e),t)do{if(t[te]){var r=void 0;if(r=t[te]._onDragOver({clientX:ae.clientX,clientY:ae.clientY,target:e,rootEl:t}),r&&!this.options.dragoverBubble)break}e=t}while(t=ai(t));yi()}},_onTouchMove:function(e){if(Re){var t=this.options,r=t.fallbackTolerance,s=t.fallbackOffset,i=e.touches?e.touches[0]:e,o=P&&Ze(P,!0),a=P&&o&&o.a,l=P&&o&&o.d,u=tn&&H&&Zr(H),c=(i.clientX-Re.clientX+s.x)/(a||1)+(u?u[0]-Fn[0]:0)/(a||1),d=(i.clientY-Re.clientY+s.y)/(l||1)+(u?u[1]-Fn[1]:0)/(l||1);if(!A.active&&!Ye){if(r&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(P){o?(o.e+=c-(Ln||0),o.f+=d-(Vn||0)):o={a:1,b:0,c:0,d:1,e:c,f:d};var h="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");E(P,"webkitTransform",h),E(P,"mozTransform",h),E(P,"msTransform",h),E(P,"transform",h),Ln=c,Vn=d,ae=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!P){var e=this.options.fallbackOnBody?document.body:M,t=U(y,!0,tn,!0,e),r=this.options;if(tn){for(H=e;E(H,"position")==="static"&&E(H,"transform")==="none"&&H!==document;)H=H.parentNode;H!==document.body&&H!==document.documentElement?(H===document&&(H=he()),t.top+=H.scrollTop,t.left+=H.scrollLeft):H=he(),Fn=Zr(H)}P=y.cloneNode(!0),re(P,r.ghostClass,!1),re(P,r.fallbackClass,!0),re(P,r.dragClass,!0),E(P,"transition",""),E(P,"transform",""),E(P,"box-sizing","border-box"),E(P,"margin",0),E(P,"top",t.top),E(P,"left",t.left),E(P,"width",t.width),E(P,"height",t.height),E(P,"opacity","0.8"),E(P,"position",tn?"absolute":"fixed"),E(P,"zIndex","100000"),E(P,"pointerEvents","none"),A.ghost=P,e.appendChild(P),E(P,"transform-origin",es/parseInt(P.style.width)*100+"% "+ts/parseInt(P.style.height)*100+"%")}},_onDragStart:function(e,t){var r=this,s=e.dataTransfer,i=r.options;if(Z("dragStart",this,{evt:e}),A.eventCanceled){this._onDrop();return}Z("setupClone",this),A.eventCanceled||(L=di(y),L.removeAttribute("id"),L.draggable=!1,L.style["will-change"]="",this._hideClone(),re(L,this.options.chosenClass,!1),A.clone=L),r.cloneId=pn(function(){Z("clone",r),!A.eventCanceled&&(r.options.removeCloneOnHide||M.insertBefore(L,y),r._hideClone(),Y({sortable:r,name:"clone"}))}),!t&&re(y,i.dragClass,!0),t?(vn=!0,r._loopId=setInterval(r._emulateDragOver,50)):(D(document,"mouseup",r._onDrop),D(document,"touchend",r._onDrop),D(document,"touchcancel",r._onDrop),s&&(s.effectAllowed="move",i.setData&&i.setData.call(r,s,y)),I(document,"drop",r),E(y,"transform","translateZ(0)")),Ye=!0,r._dragStartId=pn(r._dragStarted.bind(r,t,e)),I(document,"selectstart",r),At=!0,window.getSelection().removeAllRanges(),xt&&E(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,r=e.target,s,i,o,a=this.options,l=a.group,u=A.active,c=Zt===l,d=a.sort,h=W||u,f,p=this,g=!1;if(Xn)return;function m(z,Jt){Z(z,p,fe({evt:e,isOwner:c,axis:f?"vertical":"horizontal",revert:o,dragRect:s,targetRect:i,canSort:d,fromSortable:h,target:r,completed:b,onMove:function(ft,Yt){return nn(M,t,y,s,ft,U(ft),e,Yt)},changed:S},Jt))}function v(){m("dragOverAnimationCapture"),p.captureAnimationState(),p!==h&&h.captureAnimationState()}function b(z){return m("dragOverCompleted",{insertion:z}),z&&(c?u._hideClone():u._showClone(p),p!==h&&(re(y,W?W.options.ghostClass:u.options.ghostClass,!1),re(y,a.ghostClass,!0)),W!==p&&p!==A.active?W=p:p===A.active&&W&&(W=null),h===p&&(p._ignoreWhileAnimating=r),p.animateAll(function(){m("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(r===y&&!y.animated||r===t&&!r.animated)&&(Ge=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(y.parentNode[te]._isOutsideThisEl(e.target),!z&&Ie(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),g=!0}function S(){se=oe(y),ke=oe(y,a.draggable),Y({sortable:p,name:"change",toEl:t,newIndex:se,newDraggableIndex:ke,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=le(r,a.draggable,t,!0),m("dragOver"),A.eventCanceled)return g;if(y.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||p._ignoreWhileAnimating===r)return b(!1);if(vn=!1,u&&!a.disabled&&(c?d||(o=V!==M):W===this||(this.lastPutMode=Zt.checkPull(this,u,y,e))&&l.checkPut(this,u,y,e))){if(f=this._getDirection(e,r)==="vertical",s=U(y),m("dragOverValid"),A.eventCanceled)return g;if(o)return V=M,v(),this._hideClone(),m("revert"),A.eventCanceled||($e?M.insertBefore(y,$e):M.appendChild(y)),b(!0);var w=br(t,a.draggable);if(!w||oa(e,f,this)&&!w.animated){if(w===y)return b(!1);if(w&&t===e.target&&(r=w),r&&(i=U(r)),nn(M,t,y,s,r,i,e,!!r)!==!1)return v(),w&&w.nextSibling?t.insertBefore(y,w.nextSibling):t.appendChild(y),V=t,S(),b(!0)}else if(w&&ia(e,f,this)){var _=nt(t,0,a,!0);if(_===y)return b(!1);if(r=_,i=U(r),nn(M,t,y,s,r,i,e,!1)!==!1)return v(),t.insertBefore(y,_),V=t,S(),b(!0)}else if(r.parentNode===t){i=U(r);var O=0,j,k=y.parentNode!==t,C=!ea(y.animated&&y.toRect||s,r.animated&&r.toRect||i,f),B=f?"top":"left",q=Qr(r,"top","top")||Qr(y,"top","top"),pe=q?q.scrollTop:void 0;Ge!==r&&(j=i[B],jt=!1,en=!C&&a.invertSwap||k),O=aa(e,r,i,f,C?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,en,Ge===r);var Q;if(O!==0){var Se=oe(y);do Se-=O,Q=V.children[Se];while(Q&&(E(Q,"display")==="none"||Q===P))}if(O===0||Q===r)return b(!1);Ge=r,It=O;var Ke=r.nextElementSibling,ce=!1;ce=O===1;var ne=nn(M,t,y,s,r,i,e,ce);if(ne!==!1)return(ne===1||ne===-1)&&(ce=ne===1),Xn=!0,setTimeout(sa,30),v(),ce&&!Ke?t.appendChild(y):r.parentNode.insertBefore(y,ce?Ke:r),q&&ci(q,0,pe-q.scrollTop),V=y.parentNode,j!==void 0&&!en&&(fn=Math.abs(j-U(r)[B])),S(),b(!0)}if(t.contains(y))return b(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){D(document,"mousemove",this._onTouchMove),D(document,"touchmove",this._onTouchMove),D(document,"pointermove",this._onTouchMove),D(document,"dragover",Ie),D(document,"mousemove",Ie),D(document,"touchmove",Ie)},_offUpEvents:function(){var e=this.el.ownerDocument;D(e,"mouseup",this._onDrop),D(e,"touchend",this._onDrop),D(e,"pointerup",this._onDrop),D(e,"pointercancel",this._onDrop),D(e,"touchcancel",this._onDrop),D(document,"selectstart",this)},_onDrop:function(e){var t=this.el,r=this.options;if(se=oe(y),ke=oe(y,r.draggable),Z("drop",this,{evt:e}),V=y&&y.parentNode,se=oe(y),ke=oe(y,r.draggable),A.eventCanceled){this._nulling();return}Ye=!1,en=!1,jt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Qn(this.cloneId),Qn(this._dragStartId),this.nativeDraggable&&(D(document,"drop",this),D(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),xt&&E(document.body,"user-select",""),E(y,"transform",""),e&&(At&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),P&&P.parentNode&&P.parentNode.removeChild(P),(M===V||W&&W.lastPutMode!=="clone")&&L&&L.parentNode&&L.parentNode.removeChild(L),y&&(this.nativeDraggable&&D(y,"dragend",this),Nn(y),y.style["will-change"]="",At&&!Ye&&re(y,W?W.options.ghostClass:this.options.ghostClass,!1),re(y,this.options.chosenClass,!1),Y({sortable:this,name:"unchoose",toEl:V,newIndex:null,newDraggableIndex:null,originalEvent:e}),M!==V?(se>=0&&(Y({rootEl:V,name:"add",toEl:V,fromEl:M,originalEvent:e}),Y({sortable:this,name:"remove",toEl:V,originalEvent:e}),Y({rootEl:V,name:"sort",toEl:V,fromEl:M,originalEvent:e}),Y({sortable:this,name:"sort",toEl:V,originalEvent:e})),W&&W.save()):se!==Xe&&se>=0&&(Y({sortable:this,name:"update",toEl:V,originalEvent:e}),Y({sortable:this,name:"sort",toEl:V,originalEvent:e})),A.active&&((se==null||se===-1)&&(se=Xe,ke=Rt),Y({sortable:this,name:"end",toEl:V,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Z("nulling",this),M=y=V=P=$e=L=hn=Oe=Re=ae=At=se=ke=Xe=Rt=Ge=It=W=Zt=A.dragged=A.ghost=A.clone=A.active=null,bn.forEach(function(e){e.checked=!0}),bn.length=Ln=Vn=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":y&&(this._onDragOver(e),ra(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,r=this.el.children,s=0,i=r.length,o=this.options;s<i;s++)t=r[s],le(t,o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||ua(t));return e},sort:function(e,t){var r={},s=this.el;this.toArray().forEach(function(i,o){var a=s.children[o];le(a,this.options.draggable,s,!1)&&(r[i]=a)},this),t&&this.captureAnimationState(),e.forEach(function(i){r[i]&&(s.removeChild(r[i]),s.appendChild(r[i]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return le(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var r=this.options;if(t===void 0)return r[e];var s=Kt.modifyOption(this,e,t);typeof s<"u"?r[e]=s:r[e]=t,e==="group"&&gi(r)},destroy:function(){Z("destroy",this);var e=this.el;e[te]=null,D(e,"mousedown",this._onTapStart),D(e,"touchstart",this._onTapStart),D(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(D(e,"dragover",this),D(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),_n.splice(_n.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Oe){if(Z("hideClone",this),A.eventCanceled)return;E(L,"display","none"),this.options.removeCloneOnHide&&L.parentNode&&L.parentNode.removeChild(L),Oe=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Oe){if(Z("showClone",this),A.eventCanceled)return;y.parentNode==M&&!this.options.group.revertClone?M.insertBefore(L,y):$e?M.insertBefore(L,$e):M.appendChild(L),this.options.group.revertClone&&this.animate(y,L),E(L,"display",""),Oe=!1}}};function ra(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function nn(n,e,t,r,s,i,o,a){var l,u=n[te],c=u.options.onMove,d;return window.CustomEvent&&!we&&!qt?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=n,l.dragged=t,l.draggedRect=r,l.related=s||e,l.relatedRect=i||U(e),l.willInsertAfter=a,l.originalEvent=o,n.dispatchEvent(l),c&&(d=c.call(u,l,o)),d}function Nn(n){n.draggable=!1}function sa(){Xn=!1}function ia(n,e,t){var r=U(nt(t.el,0,t.options,!0)),s=hi(t.el,t.options,P),i=10;return e?n.clientX<s.left-i||n.clientY<r.top&&n.clientX<r.right:n.clientY<s.top-i||n.clientY<r.bottom&&n.clientX<r.left}function oa(n,e,t){var r=U(br(t.el,t.options.draggable)),s=hi(t.el,t.options,P),i=10;return e?n.clientX>s.right+i||n.clientY>r.bottom&&n.clientX>r.left:n.clientY>s.bottom+i||n.clientX>r.right&&n.clientY>r.top}function aa(n,e,t,r,s,i,o,a){var l=r?n.clientY:n.clientX,u=r?t.height:t.width,c=r?t.top:t.left,d=r?t.bottom:t.right,h=!1;if(!o){if(a&&fn<u*s){if(!jt&&(It===1?l>c+u*i/2:l<d-u*i/2)&&(jt=!0),jt)h=!0;else if(It===1?l<c+fn:l>d-fn)return-It}else if(l>c+u*(1-s)/2&&l<d-u*(1-s)/2)return la(e)}return h=h||o,h&&(l<c+u*i/2||l>d-u*i/2)?l>c+u/2?1:-1:0}function la(n){return oe(y)<oe(n)?1:-1}function ua(n){for(var e=n.tagName+n.className+n.src+n.href+n.textContent,t=e.length,r=0;t--;)r+=e.charCodeAt(t);return r.toString(36)}function ca(n){bn.length=0;for(var e=n.getElementsByTagName("input"),t=e.length;t--;){var r=e[t];r.checked&&bn.push(r)}}function pn(n){return setTimeout(n,0)}function Qn(n){return clearTimeout(n)}Cn&&I(document,"touchmove",function(n){(A.active||Ye)&&n.cancelable&&n.preventDefault()});A.utils={on:I,off:D,css:E,find:li,is:function(e,t){return!!le(e,t,e,!1)},extend:Go,throttle:ui,closest:le,toggleClass:re,clone:di,index:oe,nextTick:pn,cancelNextTick:Qn,detectDirection:pi,getChild:nt,expando:te};A.get=function(n){return n[te]};A.mount=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(A.utils=fe(fe({},A.utils),r.utils)),Kt.mount(r)})};A.create=function(n,e){return new A(n,e)};A.version=Ko;var N=[],kt,Zn,er=!1,Un,Bn,wn,Pt;function da(){function n(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return n.prototype={dragStarted:function(t){var r=t.originalEvent;this.sortable.nativeDraggable?I(document,"dragover",this._handleAutoScroll):this.options.supportPointer?I(document,"pointermove",this._handleFallbackAutoScroll):r.touches?I(document,"touchmove",this._handleFallbackAutoScroll):I(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var r=t.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?D(document,"dragover",this._handleAutoScroll):(D(document,"pointermove",this._handleFallbackAutoScroll),D(document,"touchmove",this._handleFallbackAutoScroll),D(document,"mousemove",this._handleFallbackAutoScroll)),rs(),gn(),Wo()},nulling:function(){wn=Zn=kt=er=Pt=Un=Bn=null,N.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,r){var s=this,i=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,a=document.elementFromPoint(i,o);if(wn=t,r||this.options.forceAutoScrollFallback||qt||we||xt){qn(t,this.options,a,r);var l=xe(a,!0);er&&(!Pt||i!==Un||o!==Bn)&&(Pt&&rs(),Pt=setInterval(function(){var u=xe(document.elementFromPoint(i,o),!0);u!==l&&(l=u,gn()),qn(t,s.options,u,r)},10),Un=i,Bn=o)}else{if(!this.options.bubbleScroll||xe(a,!0)===he()){gn();return}qn(t,this.options,xe(a,!1),!1)}}},_e(n,{pluginName:"scroll",initializeByDefault:!0})}function gn(){N.forEach(function(n){clearInterval(n.pid)}),N=[]}function rs(){clearInterval(Pt)}var qn=ui(function(n,e,t,r){if(e.scroll){var s=(n.touches?n.touches[0]:n).clientX,i=(n.touches?n.touches[0]:n).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=he(),u=!1,c;Zn!==t&&(Zn=t,gn(),kt=e.scroll,c=e.scrollFn,kt===!0&&(kt=xe(t,!0)));var d=0,h=kt;do{var f=h,p=U(f),g=p.top,m=p.bottom,v=p.left,b=p.right,S=p.width,w=p.height,_=void 0,O=void 0,j=f.scrollWidth,k=f.scrollHeight,C=E(f),B=f.scrollLeft,q=f.scrollTop;f===l?(_=S<j&&(C.overflowX==="auto"||C.overflowX==="scroll"||C.overflowX==="visible"),O=w<k&&(C.overflowY==="auto"||C.overflowY==="scroll"||C.overflowY==="visible")):(_=S<j&&(C.overflowX==="auto"||C.overflowX==="scroll"),O=w<k&&(C.overflowY==="auto"||C.overflowY==="scroll"));var pe=_&&(Math.abs(b-s)<=o&&B+S<j)-(Math.abs(v-s)<=o&&!!B),Q=O&&(Math.abs(m-i)<=o&&q+w<k)-(Math.abs(g-i)<=o&&!!q);if(!N[d])for(var Se=0;Se<=d;Se++)N[Se]||(N[Se]={});(N[d].vx!=pe||N[d].vy!=Q||N[d].el!==f)&&(N[d].el=f,N[d].vx=pe,N[d].vy=Q,clearInterval(N[d].pid),(pe!=0||Q!=0)&&(u=!0,N[d].pid=setInterval((function(){r&&this.layer===0&&A.active._onTouchMove(wn);var Ke=N[this.layer].vy?N[this.layer].vy*a:0,ce=N[this.layer].vx?N[this.layer].vx*a:0;typeof c=="function"&&c.call(A.dragged.parentNode[te],ce,Ke,n,wn,N[this.layer].el)!=="continue"||ci(N[this.layer].el,ce,Ke)}).bind({layer:d}),24))),d++}while(e.bubbleScroll&&h!==l&&(h=xe(h,!1)));er=u}},30),vi=function(e){var t=e.originalEvent,r=e.putSortable,s=e.dragEl,i=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var u=r||i;a();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,d=document.elementFromPoint(c.clientX,c.clientY);l(),u&&!u.el.contains(d)&&(o("spill"),this.onSpill({dragEl:s,putSortable:r}))}};function wr(){}wr.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var s=nt(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(t,s):this.sortable.el.appendChild(t),this.sortable.animateAll(),r&&r.animateAll()},drop:vi};_e(wr,{pluginName:"revertOnSpill"});function Sr(){}Sr.prototype={onSpill:function(e){var t=e.dragEl,r=e.putSortable,s=r||this.sortable;s.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),s.animateAll()},drop:vi};_e(Sr,{pluginName:"removeOnSpill"});A.mount(new da);A.mount(Sr,wr);const ha="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let fa=(n=21)=>{let e="",t=crypto.getRandomValues(new Uint8Array(n|=0));for(;n--;)e+=ha[t[n]&63];return e};function pa(n,e,t){var r;if(n instanceof Element)return[n];if(typeof n=="string"){let s=document;const i=(r=t==null?void 0:t[n])!==null&&r!==void 0?r:s.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}const Ne=n=>n;let tr=Ne;const xn=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};function Tr(n){let e;return()=>(e===void 0&&(e=n()),e)}const ga=Tr(()=>window.ScrollTimeline!==void 0);class ma{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=t}attachTimeline(e,t){const r=this.animations.map(s=>{if(ga()&&s.attachTimeline)return s.attachTimeline(e);if(typeof t=="function")return t(s)});return()=>{r.forEach((s,i)=>{s&&s(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class _i extends ma{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}const ye=n=>n*1e3,ve=n=>n/1e3,Sn=2e4;function Er(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<Sn;)e+=t,r=n.next(e);return e>=Sn?1/0:e}const bi=(n,e,t=10)=>{let r="";const s=Math.max(Math.round(e/t),2);for(let i=0;i<s;i++)r+=n(xn(0,s-1,i))+", ";return`linear(${r.substring(0,r.length-2)})`},Ue=(n,e,t)=>t>e?e:t<n?n:t;function wi(n,e){return e?n*(1e3/e):0}const ya=5;function Si(n,e,t){const r=Math.max(e-ya,0);return wi(t-n(r),e-r)}const F={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ss=.001;function va({duration:n=F.duration,bounce:e=F.bounce,velocity:t=F.velocity,mass:r=F.mass}){let s,i,o=1-e;o=Ue(F.minDamping,F.maxDamping,o),n=Ue(F.minDuration,F.maxDuration,ve(n)),o<1?(s=u=>{const c=u*o,d=c*n,h=c-t,f=nr(u,o),p=Math.exp(-d);return ss-h/f*p},i=u=>{const d=u*o*n,h=d*t+t,f=Math.pow(o,2)*Math.pow(u,2)*n,p=Math.exp(-d),g=nr(Math.pow(u,2),o);return(-s(u)+ss>0?-1:1)*((h-f)*p)/g}):(s=u=>{const c=Math.exp(-u*n),d=(u-t)*n+1;return-.001+c*d},i=u=>{const c=Math.exp(-u*n),d=(t-u)*(n*n);return c*d});const a=5/n,l=ba(s,i,a);if(n=ye(n),isNaN(l))return{stiffness:F.stiffness,damping:F.damping,duration:n};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:n}}}const _a=12;function ba(n,e,t){let r=t;for(let s=1;s<_a;s++)r=r-n(r)/e(r);return r}function nr(n,e){return n*Math.sqrt(1-e*e)}const wa=["duration","bounce"],Sa=["stiffness","damping","mass"];function is(n,e){return e.some(t=>n[t]!==void 0)}function Ta(n){let e={velocity:F.velocity,stiffness:F.stiffness,damping:F.damping,mass:F.mass,isResolvedFromDuration:!1,...n};if(!is(n,Sa)&&is(n,wa))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),s=r*r,i=2*Ue(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:F.mass,stiffness:s,damping:i}}else{const t=va(n);e={...e,...t,mass:F.mass},e.isResolvedFromDuration=!0}return e}function Ar(n=F.visualDuration,e=F.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:s}=t;const i=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:u,mass:c,duration:d,velocity:h,isResolvedFromDuration:f}=Ta({...t,velocity:-ve(t.velocity||0)}),p=h||0,g=u/(2*Math.sqrt(l*c)),m=o-i,v=ve(Math.sqrt(l/c)),b=Math.abs(m)<5;r||(r=b?F.restSpeed.granular:F.restSpeed.default),s||(s=b?F.restDelta.granular:F.restDelta.default);let S;if(g<1){const _=nr(v,g);S=O=>{const j=Math.exp(-g*v*O);return o-j*((p+g*v*m)/_*Math.sin(_*O)+m*Math.cos(_*O))}}else if(g===1)S=_=>o-Math.exp(-v*_)*(m+(p+v*m)*_);else{const _=v*Math.sqrt(g*g-1);S=O=>{const j=Math.exp(-g*v*O),k=Math.min(_*O,300);return o-j*((p+g*v*m)*Math.sinh(k)+_*m*Math.cosh(k))/_}}const w={calculatedDuration:f&&d||null,next:_=>{const O=S(_);if(f)a.done=_>=d;else{let j=0;g<1&&(j=_===0?ye(p):Si(S,_,O));const k=Math.abs(j)<=r,C=Math.abs(o-O)<=s;a.done=k&&C}return a.value=a.done?o:O,a},toString:()=>{const _=Math.min(Er(w),Sn),O=bi(j=>w.next(_*j).value,_,30);return _+"ms "+O}};return w}function Ea(n,e=100,t){const r=t({...n,keyframes:[0,e]}),s=Math.min(Er(r),Sn);return{type:"keyframes",ease:i=>r.next(s*i).value/e,duration:ve(s)}}function Dn(n){return typeof n=="function"}const Aa=(n,e,t)=>{const r=e-n;return((t-n)%r+r)%r+n},Ti=n=>Array.isArray(n)&&typeof n[0]!="number";function Ei(n,e){return Ti(n)?n[Aa(0,n.length,e)]:n}const zt=(n,e,t)=>n+(e-n)*t;function Ai(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const s=xn(0,e,r);n.push(zt(t,1,s))}}function ki(n){const e=[0];return Ai(e,n.length-1),e}const X=n=>!!(n&&n.getVelocity);function kr(n){return typeof n=="object"&&!Array.isArray(n)}function Pi(n,e,t,r){return typeof n=="string"&&kr(e)?pa(n,t,r):n instanceof NodeList?Array.from(n):Array.isArray(n)?n:[n]}function ka(n,e,t){return n*(e+1)}function os(n,e,t,r){var s;return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,n+parseFloat(e)):e==="<"?t:(s=r.get(e))!==null&&s!==void 0?s:n}function Pa(n,e){n.indexOf(e)===-1&&n.push(e)}function Oi(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Oa(n,e,t){for(let r=0;r<n.length;r++){const s=n[r];s.at>e&&s.at<t&&(Oi(n,s),r--)}}function Ca(n,e,t,r,s,i){Oa(n,s,i);for(let o=0;o<e.length;o++)n.push({value:e[o],at:zt(s,i,r[o]),easing:Ei(t,o)})}function xa(n,e){for(let t=0;t<n.length;t++)n[t]=n[t]/(e+1)}function Da(n,e){return n.at===e.at?n.value===null?1:e.value===null?-1:0:n.at-e.at}const Ra="easeInOut";function Ia(n,{defaultTransition:e={},...t}={},r,s){const i=e.duration||.3,o=new Map,a=new Map,l={},u=new Map;let c=0,d=0,h=0;for(let f=0;f<n.length;f++){const p=n[f];if(typeof p=="string"){u.set(p,d);continue}else if(!Array.isArray(p)){u.set(p.name,os(d,p.at,c,u));continue}let[g,m,v={}]=p;v.at!==void 0&&(d=os(d,v.at,c,u));let b=0;const S=(w,_,O,j=0,k=0)=>{const C=ja(w),{delay:B=0,times:q=ki(C),type:pe="keyframes",repeat:Q,repeatType:Se,repeatDelay:Ke=0,...ce}=_;let{ease:ne=e.ease||"easeOut",duration:z}=_;const Jt=typeof B=="function"?B(j,k):B,jn=C.length,ft=Dn(pe)?pe:s==null?void 0:s[pe];if(jn<=2&&ft){let pt=100;if(jn===2&&La(C)){const gt=C[1]-C[0];pt=Math.abs(gt)}const Xt={...ce};z!==void 0&&(Xt.duration=ye(z));const Qt=Ea(Xt,pt,ft);ne=Qt.ease,z=Qt.duration}z??(z=i);const Yt=d+Jt;q.length===1&&q[0]===0&&(q[1]=1);const Wr=q.length-C.length;if(Wr>0&&Ai(q,Wr),C.length===1&&C.unshift(null),Q){z=ka(z,Q);const pt=[...C],Xt=[...q];ne=Array.isArray(ne)?[...ne]:[ne];const Qt=[...ne];for(let gt=0;gt<Q;gt++){C.push(...pt);for(let mt=0;mt<pt.length;mt++)q.push(Xt[mt]+(gt+1)),ne.push(mt===0?"linear":Ei(Qt,mt-1))}xa(q,Q)}const Hr=Yt+z;Ca(O,C,ne,q,Yt,Hr),b=Math.max(Jt+z,b),h=Math.max(Hr,h)};if(X(g)){const w=as(g,a);S(m,v,ls("default",w))}else{const w=Pi(g,m,r,l),_=w.length;for(let O=0;O<_;O++){m=m,v=v;const j=w[O],k=as(j,a);for(const C in m)S(m[C],$a(v,C),ls(C,k),O,_)}}c=d,d+=b}return a.forEach((f,p)=>{for(const g in f){const m=f[g];m.sort(Da);const v=[],b=[],S=[];for(let _=0;_<m.length;_++){const{at:O,value:j,easing:k}=m[_];v.push(j),b.push(xn(0,h,O)),S.push(k||"easeOut")}b[0]!==0&&(b.unshift(0),v.unshift(v[0]),S.unshift(Ra)),b[b.length-1]!==1&&(b.push(1),v.push(null)),o.has(p)||o.set(p,{keyframes:{},transition:{}});const w=o.get(p);w.keyframes[g]=v,w.transition[g]={...e,duration:h,ease:S,times:b,...t}}}),o}function as(n,e){return!e.has(n)&&e.set(n,{}),e.get(n)}function ls(n,e){return e[n]||(e[n]=[]),e[n]}function ja(n){return Array.isArray(n)?n:[n]}function $a(n,e){return n&&n[e]?{...n,...n[e]}:{...n}}const Ma=n=>typeof n=="number",La=n=>n.every(Ma),rt=new WeakMap;function Ci(n,e){return n?n[e]||n.default||n:void 0}const at=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],lt=new Set(at),xi=new Set(["width","height","top","left","right","bottom",...at]),Va=n=>Array.isArray(n),Fa=n=>Va(n)?n[n.length-1]||0:n,Na={skipAnimations:!1,useManualTiming:!1};function Ua(n){let e=new Set,t=new Set,r=!1,s=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(u){i.has(u)&&(l.schedule(u),n()),u(o)}const l={schedule:(u,c=!1,d=!1)=>{const f=d&&r?e:t;return c&&i.add(u),f.has(u)||f.add(u),u},cancel:u=>{t.delete(u),i.delete(u)},process:u=>{if(o=u,r){s=!0;return}r=!0,[e,t]=[t,e],e.forEach(a),e.clear(),r=!1,s&&(s=!1,l.process(u))}};return l}const rn=["read","resolveKeyframes","update","preRender","render","postRender"],Ba=40;function qa(n,e){let t=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>t=!0,o=rn.reduce((v,b)=>(v[b]=Ua(i),v),{}),{read:a,resolveKeyframes:l,update:u,preRender:c,render:d,postRender:h}=o,f=()=>{const v=performance.now();t=!1,s.delta=r?1e3/60:Math.max(Math.min(v-s.timestamp,Ba),1),s.timestamp=v,s.isProcessing=!0,a.process(s),l.process(s),u.process(s),c.process(s),d.process(s),h.process(s),s.isProcessing=!1,t&&e&&(r=!1,n(f))},p=()=>{t=!0,r=!0,s.isProcessing||n(f)};return{schedule:rn.reduce((v,b)=>{const S=o[b];return v[b]=(w,_=!1,O=!1)=>(t||p(),S.schedule(w,_,O)),v},{}),cancel:v=>{for(let b=0;b<rn.length;b++)o[rn[b]].cancel(v)},state:s,steps:o}}const{schedule:be,cancel:rr,state:Tn,steps:lh}=qa(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ne,!0);let mn;function Ka(){mn=void 0}const De={now:()=>(mn===void 0&&De.set(Tn.isProcessing||Na.useManualTiming?Tn.timestamp:performance.now()),mn),set:n=>{mn=n,queueMicrotask(Ka)}};class Di{constructor(){this.subscriptions=[]}add(e){return Pa(this.subscriptions,e),()=>Oi(this.subscriptions,e)}notify(e,t,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const us=30,za=n=>!isNaN(parseFloat(n));class Ga{constructor(e,t={}){this.version="12.0.1",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const i=De.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=De.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=za(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Di);const r=this.events[e].add(t);return e==="change"?()=>{r(),be.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=De.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>us)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,us);return wi(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Vt(n,e){return new Ga(n,e)}function cs(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function Ri(n,e,t,r){if(typeof e=="function"){const[s,i]=cs(r);e=e(t!==void 0?t:n.custom,s,i)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,i]=cs(r);e=e(t!==void 0?t:n.custom,s,i)}return e}function Wa(n,e,t){const r=n.getProps();return Ri(r,e,r.custom,n)}function Ha(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Vt(t))}function Ja(n,e){const t=Wa(n,e);let{transitionEnd:r={},transition:s={},...i}=t||{};i={...i,...r};for(const o in i){const a=Fa(i[o]);Ha(n,o,a)}}function Ya(n){return!!(X(n)&&n.add)}function Xa(n,e){const t=n.getValue("willChange");if(Ya(t))return t.add(e)}const Pr=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Qa="framerAppearId",Za="data-"+Pr(Qa);function el(n){return n.props[Za]}function ds(n,e){n.timeline=e,n.onfinish=null}const Or=n=>Array.isArray(n)&&typeof n[0]=="number",tl={linearEasing:void 0};function nl(n,e){const t=Tr(n);return()=>{var r;return(r=tl[e])!==null&&r!==void 0?r:t()}}const En=nl(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function Ii(n){return!!(typeof n=="function"&&En()||!n||typeof n=="string"&&(n in sr||En())||Or(n)||Array.isArray(n)&&n.every(Ii))}const Ot=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,sr={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ot([0,.65,.55,1]),circOut:Ot([.55,0,1,.45]),backIn:Ot([.31,.01,.66,-.59]),backOut:Ot([.33,1.53,.69,.99])};function ji(n,e){if(n)return typeof n=="function"&&En()?bi(n,e):Or(n)?Ot(n):Array.isArray(n)?n.map(t=>ji(t,e)||sr.easeOut):sr[n]}const $i=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,rl=1e-7,sl=12;function il(n,e,t,r,s){let i,o,a=0;do o=e+(t-e)/2,i=$i(o,r,s)-n,i>0?t=o:e=o;while(Math.abs(i)>rl&&++a<sl);return o}function Gt(n,e,t,r){if(n===e&&t===r)return Ne;const s=i=>il(i,0,1,n,t);return i=>i===0||i===1?i:$i(s(i),e,r)}const Mi=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,Li=n=>e=>1-n(1-e),Vi=Gt(.33,1.53,.69,.99),Cr=Li(Vi),Fi=Mi(Cr),Ni=n=>(n*=2)<1?.5*Cr(n):.5*(2-Math.pow(2,-10*(n-1))),xr=n=>1-Math.sin(Math.acos(n)),ol=Li(xr),Ui=Mi(xr),Bi=n=>/^0[^.\s]+$/u.test(n);function al(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||Bi(n):!0}const ut={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Ft={...ut,transform:n=>Ue(0,1,n)},sn={...ut,default:1},$t=n=>Math.round(n*1e5)/1e5,Dr=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function ll(n){return n==null}const ul=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Rr=(n,e)=>t=>!!(typeof t=="string"&&ul.test(t)&&t.startsWith(n)||e&&!ll(t)&&Object.prototype.hasOwnProperty.call(t,e)),qi=(n,e,t)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(Dr);return{[n]:parseFloat(s),[e]:parseFloat(i),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},cl=n=>Ue(0,255,n),Kn={...ut,transform:n=>Math.round(cl(n))},Ve={test:Rr("rgb","red"),parse:qi("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+Kn.transform(n)+", "+Kn.transform(e)+", "+Kn.transform(t)+", "+$t(Ft.transform(r))+")"};function dl(n){let e="",t="",r="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const ir={test:Rr("#"),parse:dl,transform:Ve.transform},Wt=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Te=Wt("deg"),et=Wt("%"),T=Wt("px"),hl=Wt("vh"),fl=Wt("vw"),hs={...et,parse:n=>et.parse(n)/100,transform:n=>et.transform(n*100)},Qe={test:Rr("hsl","hue"),parse:qi("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+et.transform($t(e))+", "+et.transform($t(t))+", "+$t(Ft.transform(r))+")"},J={test:n=>Ve.test(n)||ir.test(n)||Qe.test(n),parse:n=>Ve.test(n)?Ve.parse(n):Qe.test(n)?Qe.parse(n):ir.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Ve.transform(n):Qe.transform(n)},pl=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function gl(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(Dr))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(pl))===null||t===void 0?void 0:t.length)||0)>0}const Ki="number",zi="color",ml="var",yl="var(",fs="${}",vl=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Nt(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=e.replace(vl,l=>(J.test(l)?(r.color.push(i),s.push(zi),t.push(J.parse(l))):l.startsWith(yl)?(r.var.push(i),s.push(ml),t.push(l)):(r.number.push(i),s.push(Ki),t.push(parseFloat(l))),++i,fs)).split(fs);return{values:t,split:a,indexes:r,types:s}}function Gi(n){return Nt(n).values}function Wi(n){const{split:e,types:t}=Nt(n),r=e.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=e[o],s[o]!==void 0){const a=t[o];a===Ki?i+=$t(s[o]):a===zi?i+=J.transform(s[o]):i+=s[o]}return i}}const _l=n=>typeof n=="number"?0:n;function bl(n){const e=Gi(n);return Wi(n)(e.map(_l))}const ct={test:gl,parse:Gi,createTransformer:Wi,getAnimatableNone:bl},wl=new Set(["brightness","contrast","saturate","opacity"]);function Sl(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(Dr)||[];if(!r)return n;const s=t.replace(r,"");let i=wl.has(e)?1:0;return r!==t&&(i*=100),e+"("+i+s+")"}const Tl=/\b([a-z-]*)\(.*?\)/gu,or={...ct,getAnimatableNone:n=>{const e=n.match(Tl);return e?e.map(Sl).join(" "):n}},El={borderWidth:T,borderTopWidth:T,borderRightWidth:T,borderBottomWidth:T,borderLeftWidth:T,borderRadius:T,radius:T,borderTopLeftRadius:T,borderTopRightRadius:T,borderBottomRightRadius:T,borderBottomLeftRadius:T,width:T,maxWidth:T,height:T,maxHeight:T,top:T,right:T,bottom:T,left:T,padding:T,paddingTop:T,paddingRight:T,paddingBottom:T,paddingLeft:T,margin:T,marginTop:T,marginRight:T,marginBottom:T,marginLeft:T,backgroundPositionX:T,backgroundPositionY:T},Al={rotate:Te,rotateX:Te,rotateY:Te,rotateZ:Te,scale:sn,scaleX:sn,scaleY:sn,scaleZ:sn,skew:Te,skewX:Te,skewY:Te,distance:T,translateX:T,translateY:T,translateZ:T,x:T,y:T,z:T,perspective:T,transformPerspective:T,opacity:Ft,originX:hs,originY:hs,originZ:T},ps={...ut,transform:Math.round},Ir={...El,...Al,zIndex:ps,size:T,fillOpacity:Ft,strokeOpacity:Ft,numOctaves:ps},kl={...Ir,color:J,backgroundColor:J,outlineColor:J,fill:J,stroke:J,borderColor:J,borderTopColor:J,borderRightColor:J,borderBottomColor:J,borderLeftColor:J,filter:or,WebkitFilter:or},jr=n=>kl[n];function Hi(n,e){let t=jr(n);return t!==or&&(t=ct),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const Pl=new Set(["auto","none","0"]);function Ol(n,e,t){let r=0,s;for(;r<n.length&&!s;){const i=n[r];typeof i=="string"&&!Pl.has(i)&&Nt(i).values.length&&(s=n[r]),r++}if(s&&t)for(const i of e)n[i]=Hi(t,s)}const gs=n=>n===ut||n===T,ms=(n,e)=>parseFloat(n.split(", ")[e]),ys=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return ms(s[1],e);{const i=r.match(/^matrix\((.+)\)$/u);return i?ms(i[1],n):0}},Cl=new Set(["x","y","z"]),xl=at.filter(n=>!Cl.has(n));function Dl(n){const e=[];return xl.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const st={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:ys(4,13),y:ys(5,14)};st.translateX=st.x;st.translateY=st.y;const Fe=new Set;let ar=!1,lr=!1;function Ji(){if(lr){const n=Array.from(Fe).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const s=Dl(r);s.length&&(t.set(r,s),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=t.get(r);s&&s.forEach(([i,o])=>{var a;(a=r.getValue(i))===null||a===void 0||a.set(o)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}lr=!1,ar=!1,Fe.forEach(n=>n.complete()),Fe.clear()}function Yi(){Fe.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(lr=!0)})}function Rl(){Yi(),Ji()}class $r{constructor(e,t,r,s,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Fe.add(this),ar||(ar=!0,be.read(Yi),be.resolveKeyframes(Ji))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:s}=this;for(let i=0;i<e.length;i++)if(e[i]===null)if(i===0){const o=s==null?void 0:s.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&t){const l=r.readValue(t,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),s&&o===void 0&&s.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Fe.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Fe.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Xi=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),Qi=n=>e=>typeof e=="string"&&e.startsWith(n),Zi=Qi("--"),Il=Qi("var(--"),Mr=n=>Il(n)?jl.test(n.split("/*")[0].trim()):!1,jl=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,$l=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Ml(n){const e=$l.exec(n);if(!e)return[,];const[,t,r,s]=e;return[`--${t??r}`,s]}function eo(n,e,t=1){const[r,s]=Ml(n);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return Xi(o)?parseFloat(o):o}return Mr(s)?eo(s,e,t+1):s}const to=n=>e=>e.test(n),Ll={test:n=>n==="auto",parse:n=>n},no=[ut,T,et,Te,fl,hl,Ll],vs=n=>no.find(to(n));class ro extends $r{constructor(e,t,r,s,i){super(e,t,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),Mr(u))){const c=eo(u,t.current);c!==void 0&&(e[l]=c),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!xi.has(r)||e.length!==2)return;const[s,i]=e,o=vs(s),a=vs(i);if(o!==a)if(gs(o)&&gs(a))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let s=0;s<e.length;s++)al(e[s])&&r.push(s);r.length&&Ol(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=st[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:t,name:r,unresolvedKeyframes:s}=this;if(!t||!t.current)return;const i=t.getValue(r);i&&i.jump(this.measuredOrigin,!1);const o=s.length-1,a=s[o];s[o]=st[r](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const _s=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(ct.test(n)||n==="0")&&!n.startsWith("url("));function Vl(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function Fl(n,e,t,r){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=n[n.length-1],o=_s(s,e),a=_s(i,e);return!o||!a?!1:Vl(n)||(t==="spring"||Dn(t))&&r}const Nl=n=>n!==null;function Rn(n,{repeat:e,repeatType:t="loop"},r){const s=n.filter(Nl),i=e&&t!=="loop"&&e%2===1?0:s.length-1;return!i||r===void 0?s[i]:r}const Ul=40;class so{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=De.now(),this.options={autoplay:e,delay:t,type:r,repeat:s,repeatDelay:i,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Ul?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Rl(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=De.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:i,delay:o,onComplete:a,onUpdate:l,isGenerator:u}=this.options;if(!u&&!Fl(e,r,s,i))if(o)this.options.duration=0;else{l&&l(Rn(e,this.options,t)),a&&a(),this.resolveFinishedPromise();return}const c=this.initPlayback(e,t);c!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...c},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function zn(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Bl({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let s=0,i=0,o=0;if(!e)s=i=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;s=zn(l,a,n+1/3),i=zn(l,a,n),o=zn(l,a,n-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function An(n,e){return t=>t>0?e:n}const Gn=(n,e,t)=>{const r=n*n,s=t*(e*e-r)+r;return s<0?0:Math.sqrt(s)},ql=[ir,Ve,Qe],Kl=n=>ql.find(e=>e.test(n));function bs(n){const e=Kl(n);if(!e)return!1;let t=e.parse(n);return e===Qe&&(t=Bl(t)),t}const ws=(n,e)=>{const t=bs(n),r=bs(e);if(!t||!r)return An(n,e);const s={...t};return i=>(s.red=Gn(t.red,r.red,i),s.green=Gn(t.green,r.green,i),s.blue=Gn(t.blue,r.blue,i),s.alpha=zt(t.alpha,r.alpha,i),Ve.transform(s))},zl=(n,e)=>t=>e(n(t)),Lr=(...n)=>n.reduce(zl),ur=new Set(["none","hidden"]);function Gl(n,e){return ur.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function Wl(n,e){return t=>zt(n,e,t)}function Vr(n){return typeof n=="number"?Wl:typeof n=="string"?Mr(n)?An:J.test(n)?ws:Yl:Array.isArray(n)?io:typeof n=="object"?J.test(n)?ws:Hl:An}function io(n,e){const t=[...n],r=t.length,s=n.map((i,o)=>Vr(i)(i,e[o]));return i=>{for(let o=0;o<r;o++)t[o]=s[o](i);return t}}function Hl(n,e){const t={...n,...e},r={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(r[s]=Vr(n[s])(n[s],e[s]));return s=>{for(const i in r)t[i]=r[i](s);return t}}function Jl(n,e){var t;const r=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],a=n.indexes[o][s[o]],l=(t=n.values[a])!==null&&t!==void 0?t:0;r[i]=l,s[o]++}return r}const Yl=(n,e)=>{const t=ct.createTransformer(e),r=Nt(n),s=Nt(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?ur.has(n)&&!s.values.length||ur.has(e)&&!r.values.length?Gl(n,e):Lr(io(Jl(r,s),s.values),t):An(n,e)};function oo(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?zt(n,e,t):Vr(n)(n,e)}function Ss({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const d=n[0],h={done:!1,value:d},f=k=>a!==void 0&&k<a||l!==void 0&&k>l,p=k=>a===void 0?l:l===void 0||Math.abs(a-k)<Math.abs(l-k)?a:l;let g=t*e;const m=d+g,v=o===void 0?m:o(m);v!==m&&(g=v-d);const b=k=>-g*Math.exp(-k/r),S=k=>v+b(k),w=k=>{const C=b(k),B=S(k);h.done=Math.abs(C)<=u,h.value=h.done?v:B};let _,O;const j=k=>{f(h.value)&&(_=k,O=Ar({keyframes:[h.value,p(h.value)],velocity:Si(S,k,h.value),damping:s,stiffness:i,restDelta:u,restSpeed:c}))};return j(0),{calculatedDuration:null,next:k=>{let C=!1;return!O&&_===void 0&&(C=!0,w(k),j(k)),_!==void 0&&k>=_?O.next(k-_):(!C&&w(k),h)}}}const Xl=Gt(.42,0,1,1),Ql=Gt(0,0,.58,1),ao=Gt(.42,0,.58,1),Ts={linear:Ne,easeIn:Xl,easeInOut:ao,easeOut:Ql,circIn:xr,circInOut:Ui,circOut:ol,backIn:Cr,backInOut:Fi,backOut:Vi,anticipate:Ni},Es=n=>{if(Or(n)){tr(n.length===4);const[e,t,r,s]=n;return Gt(e,t,r,s)}else if(typeof n=="string")return tr(Ts[n]!==void 0),Ts[n];return n};function Zl(n,e,t){const r=[],s=t||oo,i=n.length-1;for(let o=0;o<i;o++){let a=s(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||Ne:e;a=Lr(l,a)}r.push(a)}return r}function eu(n,e,{clamp:t=!0,ease:r,mixer:s}={}){const i=n.length;if(tr(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[i-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=Zl(e,r,s),l=a.length,u=c=>{if(o&&c<n[0])return e[0];let d=0;if(l>1)for(;d<n.length-2&&!(c<n[d+1]);d++);const h=xn(n[d],n[d+1],c);return a[d](h)};return t?c=>u(Ue(n[0],n[i-1],c)):u}function tu(n,e){return n.map(t=>t*e)}function nu(n,e){return n.map(()=>e||ao).splice(0,n.length-1)}function kn({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const s=Ti(r)?r.map(Es):Es(r),i={done:!1,value:e[0]},o=tu(t&&t.length===e.length?t:ki(e),n),a=eu(o,e,{ease:Array.isArray(s)?s:nu(e,s)});return{calculatedDuration:n,next:l=>(i.value=a(l),i.done=l>=n,i)}}const ru=n=>{const e=({timestamp:t})=>n(t);return{start:()=>be.update(e,!0),stop:()=>rr(e),now:()=>Tn.isProcessing?Tn.timestamp:De.now()}},su={decay:Ss,inertia:Ss,tween:kn,keyframes:kn,spring:Ar},iu=n=>n/100;class Fr extends so{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:t,motionValue:r,element:s,keyframes:i}=this.options,o=(s==null?void 0:s.KeyframeResolver)||$r,a=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new o(i,a,t,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=this.options,a=Dn(t)?t:su[t]||kn;let l,u;a!==kn&&typeof e[0]!="number"&&(l=Lr(iu,oo(e[0],e[1])),e=[0,100]);const c=a({...this.options,keyframes:e});i==="mirror"&&(u=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=Er(c));const{calculatedDuration:d}=c,h=d+s,f=h*(r+1)-s;return{generator:c,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:h,totalDuration:f}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:r}=this;if(!r){const{keyframes:k}=this.options;return{done:!0,value:k[k.length-1]}}const{finalKeyframe:s,generator:i,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:u,totalDuration:c,resolvedDuration:d}=r;if(this.startTime===null)return i.next(0);const{delay:h,repeat:f,repeatType:p,repeatDelay:g,onUpdate:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-c/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const v=this.currentTime-h*(this.speed>=0?1:-1),b=this.speed>=0?v<0:v>c;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let S=this.currentTime,w=i;if(f){const k=Math.min(this.currentTime,c)/d;let C=Math.floor(k),B=k%1;!B&&k>=1&&(B=1),B===1&&C--,C=Math.min(C,f+1),!!(C%2)&&(p==="reverse"?(B=1-B,g&&(B-=g/d)):p==="mirror"&&(w=o)),S=Ue(0,1,B)*d}const _=b?{done:!1,value:l[0]}:w.next(S);a&&(_.value=a(_.value));let{done:O}=_;!b&&u!==null&&(O=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return j&&s!==void 0&&(_.value=Rn(l,this.options,s)),m&&m(_.value),j&&this.finish(),_}get duration(){const{resolved:e}=this;return e?ve(e.calculatedDuration):0}get time(){return ve(this.currentTime)}set time(e){e=ye(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=ve(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=ru,onPlay:t,startTime:r}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),t&&t();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const ou=new Set(["opacity","clipPath","filter","transform"]);function au(n,e,t,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const u={[e]:t};l&&(u.offset=l);const c=ji(a,s);return Array.isArray(c)&&(u.easing=c),n.animate(u,{delay:r,duration:s,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}const lu=Tr(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Pn=10,uu=2e4;function cu(n){return Dn(n.type)||n.type==="spring"||!Ii(n.ease)}function du(n,e){const t=new Fr({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:n[0]};const s=[];let i=0;for(;!r.done&&i<uu;)r=t.sample(i),s.push(r.value),i+=Pn;return{times:void 0,keyframes:s,duration:i-Pn,ease:"linear"}}const lo={anticipate:Ni,backInOut:Fi,circInOut:Ui};function hu(n){return n in lo}class As extends so{constructor(e){super(e);const{name:t,motionValue:r,element:s,keyframes:i}=this.options;this.resolver=new ro(i,(o,a)=>this.onKeyframesResolved(o,a),t,r,s),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:r=300,times:s,ease:i,type:o,motionValue:a,name:l,startTime:u}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof i=="string"&&En()&&hu(i)&&(i=lo[i]),cu(this.options)){const{onComplete:d,onUpdate:h,motionValue:f,element:p,...g}=this.options,m=du(e,g);e=m.keyframes,e.length===1&&(e[1]=e[0]),r=m.duration,s=m.times,i=m.ease,o="keyframes"}const c=au(a.owner.current,l,e,{...this.options,duration:r,times:s,ease:i});return c.startTime=u??this.calcStartTime(),this.pendingTimeline?(ds(c,this.pendingTimeline),this.pendingTimeline=void 0):c.onfinish=()=>{const{onComplete:d}=this.options;a.set(Rn(e,this.options,t)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:c,duration:r,times:s,type:o,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return ve(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return ve(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.currentTime=ye(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return Ne;const{animation:r}=t;ds(r,e)}return Ne}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:r,duration:s,type:i,ease:o,times:a}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:c,onComplete:d,element:h,...f}=this.options,p=new Fr({...f,keyframes:r,duration:s,type:i,ease:o,times:a,isGenerator:!0}),g=ye(this.time);u.setWithVelocity(p.sample(g-Pn).value,p.sample(g).value,Pn)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:r,repeatDelay:s,repeatType:i,damping:o,type:a}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return lu()&&r&&ou.has(r)&&!l&&!u&&!s&&i!=="mirror"&&o!==0&&a!=="inertia"}}const fu={type:"spring",stiffness:500,damping:25,restSpeed:10},pu=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),gu={type:"keyframes",duration:.8},mu={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},yu=(n,{keyframes:e})=>e.length>2?gu:lt.has(n)?n.startsWith("scale")?pu(e[1]):fu:mu;function vu({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const uo=(n,e,t,r={},s,i)=>o=>{const a=Ci(r,n)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-ye(l);let c={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:h=>{e.set(h),a.onUpdate&&a.onUpdate(h)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:e,element:i?void 0:s};vu(a)||(c={...c,...yu(n,c)}),c.duration&&(c.duration=ye(c.duration)),c.repeatDelay&&(c.repeatDelay=ye(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let d=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(c.duration=0,c.delay===0&&(d=!0)),d&&!i&&e.get()!==void 0){const h=Rn(c.keyframes,a);if(h!==void 0)return be.update(()=>{c.onUpdate(h),c.onComplete()}),new _i([])}return!i&&As.supports(c)?new As(c):new Fr(c)};function _u({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function bu(n,e,{delay:t=0,transitionOverride:r,type:s}={}){var i;let{transition:o=n.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const u=[],c=s&&n.animationState&&n.animationState.getState()[s];for(const d in l){const h=n.getValue(d,(i=n.latestValues[d])!==null&&i!==void 0?i:null),f=l[d];if(f===void 0||c&&_u(c,d))continue;const p={delay:t,...Ci(o||{},d)};let g=!1;if(window.MotionHandoffAnimation){const v=el(n);if(v){const b=window.MotionHandoffAnimation(v,d,be);b!==null&&(p.startTime=b,g=!0)}}Xa(n,d),h.start(uo(d,h,f,n.shouldReduceMotion&&xi.has(d)?{type:!1}:p,n,g));const m=h.animation;m&&u.push(m)}return a&&Promise.all(u).then(()=>{be.update(()=>{a&&Ja(n,a)})}),u}function wu(n){return n instanceof SVGElement&&n.tagName!=="svg"}const ks=()=>({min:0,max:0}),Nr=()=>({x:ks(),y:ks()}),Ps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},cr={};for(const n in Ps)cr[n]={isEnabled:e=>Ps[n].some(t=>!!e[t])};const Su=typeof window<"u",dr={current:null},co={current:!1};function Tu(){if(co.current=!0,!!Su)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>dr.current=n.matches;n.addListener(e),e()}else dr.current=!1}const Eu=[...no,J,ct],Au=n=>Eu.find(to(n));function ku(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Pu(n){return typeof n=="string"||Array.isArray(n)}const Ou=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Cu=["initial",...Ou];function ho(n){return ku(n.animate)||Cu.some(e=>Pu(n[e]))}function xu(n){return!!(ho(n)||n.variants)}function Du(n,e,t){for(const r in e){const s=e[r],i=t[r];if(X(s))n.addValue(r,s);else if(X(i))n.addValue(r,Vt(s,{owner:n}));else if(i!==s)if(n.hasValue(r)){const o=n.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=n.getStaticValue(r);n.addValue(r,Vt(o!==void 0?o:s,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const Os=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class fo{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=$r,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=De.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,be.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:c}=o;this.onUpdate=c,this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=ho(t),this.isVariantNode=xu(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(t,{},this);for(const f in h){const p=h[f];l[f]!==void 0&&X(p)&&p.set(l[f],!1)}}mount(e){this.current=e,rt.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),co.current||Tu(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:dr.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){rt.delete(this.current),this.projection&&this.projection.unmount(),rr(this.notifyUpdate),rr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=lt.has(e),s=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&be.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),i(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in cr){const t=cr[e];if(!t)continue;const{isEnabled:r,Feature:s}=t;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Nr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<Os.length;r++){const s=Os[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=Du(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Vt(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){var r;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(Xi(s)||Bi(s))?s=parseFloat(s):!Au(s)&&ct.test(t)&&(s=Hi(e,t)),this.setBaseTarget(e,X(s)?s.get():s)),X(s)?s.get():s}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const o=Ri(this.props,r,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);o&&(s=o[e])}if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!X(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Di),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class po extends fo{constructor(){super(...arguments),this.KeyframeResolver=ro}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;X(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}const go=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Ru={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Iu=at.length;function ju(n,e,t){let r="",s=!0;for(let i=0;i<Iu;i++){const o=at[i],a=n[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||t){const u=go(a,Ir[o]);if(!l){s=!1;const c=Ru[o]||o;r+=`${c}(${u}) `}t&&(e[o]=u)}}return r=r.trim(),t?r=t(e,s?"":r):s&&(r="none"),r}function mo(n,e,t){const{style:r,vars:s,transformOrigin:i}=n;let o=!1,a=!1;for(const l in e){const u=e[l];if(lt.has(l)){o=!0;continue}else if(Zi(l)){s[l]=u;continue}else{const c=go(u,Ir[l]);l.startsWith("origin")?(a=!0,i[l]=c):r[l]=c}}if(e.transform||(o||t?r.transform=ju(e,n.transform,t):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:c=0}=i;r.transformOrigin=`${l} ${u} ${c}`}}const $u={offset:"stroke-dashoffset",array:"stroke-dasharray"},Mu={offset:"strokeDashoffset",array:"strokeDasharray"};function Lu(n,e,t=1,r=0,s=!0){n.pathLength=1;const i=s?$u:Mu;n[i.offset]=T.transform(-r);const o=T.transform(e),a=T.transform(t);n[i.array]=`${o} ${a}`}function Cs(n,e,t){return typeof n=="string"?n:T.transform(e+t*n)}function Vu(n,e,t){const r=Cs(e,n.x,n.width),s=Cs(t,n.y,n.height);return`${r} ${s}`}function Fu(n,{attrX:e,attrY:t,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},c,d){if(mo(n,u,d),c){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:h,style:f,dimensions:p}=n;h.transform&&(p&&(f.transform=h.transform),delete h.transform),p&&(s!==void 0||i!==void 0||f.transform)&&(f.transformOrigin=Vu(p,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(h.x=e),t!==void 0&&(h.y=t),r!==void 0&&(h.scale=r),o!==void 0&&Lu(h,o,a,l,!1)}const yo=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),Nu=n=>typeof n=="string"&&n.toLowerCase()==="svg";function vo(n,{style:e,vars:t},r,s){Object.assign(n.style,e,s&&s.getProjectionStyles(r));for(const i in t)n.style.setProperty(i,t[i])}function Uu(n,e,t,r){vo(n,e,void 0,r);for(const s in e.attrs)n.setAttribute(yo.has(s)?s:Pr(s),e.attrs[s])}const Bu={};function qu(n,{layout:e,layoutId:t}){return lt.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Bu[n]||n==="opacity")}function _o(n,e,t){var r;const{style:s}=n,i={};for(const o in s)(X(s[o])||e.style&&X(e.style[o])||qu(o,n)||((r=t==null?void 0:t.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(i[o]=s[o]);return i}function Ku(n,e,t){const r=_o(n,e,t);for(const s in n)if(X(n[s])||X(e[s])){const i=at.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=n[s]}return r}class zu extends po{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Nr}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(lt.has(t)){const r=jr(t);return r&&r.default||0}return t=yo.has(t)?t:Pr(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return Ku(e,t,r)}build(e,t,r){Fu(e,t,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,r,s){Uu(e,t,r,s)}mount(e){this.isSVGTag=Nu(e.tagName),super.mount(e)}}function Gu({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function Wu(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function Hu(n,e){return Gu(Wu(n.getBoundingClientRect(),e))}function Ju(n){return window.getComputedStyle(n)}class Yu extends po{constructor(){super(...arguments),this.type="html",this.renderInstance=vo}readValueFromInstance(e,t){if(lt.has(t)){const r=jr(t);return r&&r.default||0}else{const r=Ju(e),s=(Zi(t)?r.getPropertyValue(t):r[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return Hu(e,t)}build(e,t,r){mo(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return _o(e,t,r)}}function Xu(n,e){return n in e}class Qu extends fo{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,t){if(Xu(t,e)){const r=e[t];if(typeof r=="string"||typeof r=="number")return r}}getBaseTargetFromProps(){}removeValueFromRenderState(e,t){delete t.output[e]}measureInstanceViewportBox(){return Nr()}build(e,t){Object.assign(e.output,t)}renderInstance(e,{output:t}){Object.assign(e,t)}sortInstanceNodePosition(){return 0}}function Zu(n){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},t=wu(n)?new zu(e):new Yu(e);t.mount(n),rt.set(n,t)}function ec(n){const e={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},t=new Qu(e);t.mount(n),rt.set(n,t)}function tc(n,e,t){const r=X(n)?n:Vt(n);return r.start(uo("",r,e,t)),r.animation}function nc(n,e){return X(n)||typeof n=="number"||typeof n=="string"&&!kr(e)}function bo(n,e,t,r){const s=[];if(nc(n,e))s.push(tc(n,kr(e)&&e.default||e,t&&(t.default||t)));else{const i=Pi(n,e,r),o=i.length;for(let a=0;a<o;a++){const l=i[a],u=l instanceof Element?Zu:ec;rt.has(l)||u(l);const c=rt.get(l),d={...t};"delay"in d&&typeof d.delay=="function"&&(d.delay=d.delay(a,o)),s.push(...bu(c,{...e,transition:d},{}))}}return s}function rc(n,e,t){const r=[];return Ia(n,e,t,{spring:Ar}).forEach(({keyframes:i,transition:o},a)=>{r.push(...bo(a,i,o))}),r}function sc(n){return Array.isArray(n)&&n.some(Array.isArray)}function ic(n){function e(t,r,s){let i=[];return sc(t)?i=rc(t,r,n):i=bo(t,r,s,n),new _i(i)}return e}const oc=ic(),ac="modulepreload",lc=function(n){return"/u05/"+n},xs={},it=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(t.map(l=>{if(l=lc(l),l in xs)return;xs[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":ac,u||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},uc=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>it(async()=>{const{default:r}=await Promise.resolve().then(()=>dt);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class Ur extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class cc extends Ur{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class dc extends Ur{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class hc extends Ur{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var hr;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(hr||(hr={}));var fc=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};class pc{constructor(e,{headers:t={},customFetch:r,region:s=hr.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=uc(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return fc(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=t;let a={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const c=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:u}).catch(p=>{throw new cc(p)}),d=c.headers.get("x-relay-error");if(d&&d==="true")throw new dc(c);if(!c.ok)throw new hc(c);let h=((r=c.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),f;return h==="application/json"?f=yield c.json():h==="application/octet-stream"?f=yield c.blob():h==="text/event-stream"?f=c:h==="multipart/form-data"?f=yield c.formData():f=yield c.text(),{data:f,error:null}}catch(s){return{data:null,error:s}}})}}function gc(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function mc(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var G={},yt={},vt={},_t={},bt={},wt={},yc=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ot=yc();const vc=ot.fetch,wo=ot.fetch.bind(ot),So=ot.Headers,_c=ot.Request,bc=ot.Response,dt=Object.freeze(Object.defineProperty({__proto__:null,Headers:So,Request:_c,Response:bc,default:wo,fetch:vc},Symbol.toStringTag,{value:"Module"})),wc=mc(dt);var on={},Ds;function To(){if(Ds)return on;Ds=1,Object.defineProperty(on,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return on.default=n,on}var Rs;function Eo(){if(Rs)return wt;Rs=1;var n=wt.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(wt,"__esModule",{value:!0});const e=n(wc),t=n(To());class r{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=Object.assign({},this.headers),this.headers[i]=o,this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var c,d,h;let f=null,p=null,g=null,m=u.status,v=u.statusText;if(u.ok){if(this.method!=="HEAD"){const _=await u.text();_===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?p=_:p=JSON.parse(_))}const S=(c=this.headers.Prefer)===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),w=(d=u.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");S&&w&&w.length>1&&(g=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(p)&&(p.length>1?(f={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,g=null,m=406,v="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{const S=await u.text();try{f=JSON.parse(S),Array.isArray(f)&&u.status===404&&(p=[],f=null,m=200,v="OK")}catch{u.status===404&&S===""?(m=204,v="No Content"):f={message:S}}if(f&&this.isMaybeSingle&&(!((h=f==null?void 0:f.details)===null||h===void 0)&&h.includes("0 rows"))&&(f=null,m=200,v="OK"),f&&this.shouldThrowOnError)throw new t.default(f)}return{error:f,data:p,count:g,status:m,statusText:v}});return this.shouldThrowOnError||(l=l.catch(u=>{var c,d,h;return{error:{message:`${(c=u==null?void 0:u.name)!==null&&c!==void 0?c:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(d=u==null?void 0:u.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(h=u==null?void 0:u.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),l.then(i,o)}}return wt.default=r,wt}var Is;function Ao(){if(Is)return bt;Is=1;var n=bt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bt,"__esModule",{value:!0});const e=n(Eo());class t extends e.default{select(s){let i=!1;const o=(s??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(s,{ascending:i=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.order`:"order",c=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${c?`${c},`:""}${s}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:o=i}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${s}`),this}range(s,i,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,u=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${s}`),this.url.searchParams.set(u,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:s=!1,verbose:i=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:u="text"}={}){var c;const d=[s?"analyze":null,i?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),h=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${h}"; options=${d};`,u==="json"?this:this}rollback(){var s;return((s=this.headers.Prefer)!==null&&s!==void 0?s:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return bt.default=t,bt}var js;function Br(){if(js)return _t;js=1;var n=_t.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_t,"__esModule",{value:!0});const e=n(Ao());class t extends e.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const o=Array.from(new Set(i)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(s,`in.(${o})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:o,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const u=o===void 0?"":`(${o})`;return this.url.searchParams.append(s,`${l}fts${u}.${i}`),this}match(s){return Object.entries(s).forEach(([i,o])=>{this.url.searchParams.append(i,`eq.${o}`)}),this}not(s,i,o){return this.url.searchParams.append(s,`not.${i}.${o}`),this}or(s,{foreignTable:i,referencedTable:o=i}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${s})`),this}filter(s,i,o){return this.url.searchParams.append(s,`${i}.${o}`),this}}return _t.default=t,_t}var $s;function ko(){if($s)return vt;$s=1;var n=vt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vt,"__esModule",{value:!0});const e=n(Br());class t{constructor(s,{headers:i={},schema:o,fetch:a}){this.url=s,this.headers=i,this.schema=o,this.fetch=a}select(s,{head:i=!1,count:o}={}){const a=i?"HEAD":"GET";let l=!1;const u=(s??"*").split("").map(c=>/\s/.test(c)&&!l?"":(c==='"'&&(l=!l),c)).join("");return this.url.searchParams.set("select",u),o&&(this.headers.Prefer=`count=${o}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(s,{count:i,defaultToNull:o=!0}={}){const a="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(s)){const u=s.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(u.length>0){const c=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(s,{onConflict:i,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){const u="POST",c=[`resolution=${o?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&c.push(this.headers.Prefer),a&&c.push(`count=${a}`),l||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(s)){const d=s.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(d.length>0){const h=[...new Set(d)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}update(s,{count:i}={}){const o="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),this.headers.Prefer=a.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:s}={}){const i="DELETE",o=[];return s&&o.push(`count=${s}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return vt.default=t,vt}var St={},Tt={},Ms;function Sc(){return Ms||(Ms=1,Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.version=void 0,Tt.version="0.0.0-automated"),Tt}var Ls;function Tc(){if(Ls)return St;Ls=1,Object.defineProperty(St,"__esModule",{value:!0}),St.DEFAULT_HEADERS=void 0;const n=Sc();return St.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},St}var Vs;function Ec(){if(Vs)return yt;Vs=1;var n=yt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(yt,"__esModule",{value:!0});const e=n(ko()),t=n(Br()),r=Tc();class s{constructor(o,{headers:a={},schema:l,fetch:u}={}){this.url=o,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),a),this.schemaName=l,this.fetch=u}from(o){const a=new URL(`${this.url}/${o}`);return new e.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new s(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:l=!1,get:u=!1,count:c}={}){let d;const h=new URL(`${this.url}/rpc/${o}`);let f;l||u?(d=l?"HEAD":"GET",Object.entries(a).filter(([g,m])=>m!==void 0).map(([g,m])=>[g,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([g,m])=>{h.searchParams.append(g,m)})):(d="POST",f=a);const p=Object.assign({},this.headers);return c&&(p.Prefer=`count=${c}`),new t.default({method:d,url:h,headers:p,schema:this.schemaName,body:f,fetch:this.fetch,allowEmpty:!1})}}return yt.default=s,yt}var Fs;function Ac(){if(Fs)return G;Fs=1;var n=G.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(G,"__esModule",{value:!0}),G.PostgrestError=G.PostgrestBuilder=G.PostgrestTransformBuilder=G.PostgrestFilterBuilder=G.PostgrestQueryBuilder=G.PostgrestClient=void 0;const e=n(Ec());G.PostgrestClient=e.default;const t=n(ko());G.PostgrestQueryBuilder=t.default;const r=n(Br());G.PostgrestFilterBuilder=r.default;const s=n(Ao());G.PostgrestTransformBuilder=s.default;const i=n(Eo());G.PostgrestBuilder=i.default;const o=n(To());return G.PostgrestError=o.default,G.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:o.default},G}var kc=Ac();const Pc=gc(kc),{PostgrestClient:Oc,PostgrestQueryBuilder:uh,PostgrestFilterBuilder:ch,PostgrestTransformBuilder:dh,PostgrestBuilder:hh,PostgrestError:fh}=Pc,Cc="2.11.2",xc={"X-Client-Info":`realtime-js/${Cc}`},Dc="1.0.0",Po=1e4,Rc=1e3;var tt;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(tt||(tt={}));var ie;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(ie||(ie={}));var ue;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(ue||(ue={}));var fr;(function(n){n.websocket="websocket"})(fr||(fr={}));var Le;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Le||(Le={}));class Ic{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+s));o=o+s;const l=r.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class Oo{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var $;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})($||($={}));const Ns=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=jc(o,n,e,s),i),{})},jc=(n,e,t,r)=>{const s=e.find(a=>a.name===n),i=s==null?void 0:s.type,o=t[n];return i&&!r.includes(i)?Co(i,o):pr(o)},Co=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return Vc(e,t)}switch(n){case $.bool:return $c(e);case $.float4:case $.float8:case $.int2:case $.int4:case $.int8:case $.numeric:case $.oid:return Mc(e);case $.json:case $.jsonb:return Lc(e);case $.timestamp:return Fc(e);case $.abstime:case $.date:case $.daterange:case $.int4range:case $.int8range:case $.money:case $.reltime:case $.text:case $.time:case $.timestamptz:case $.timetz:case $.tsrange:case $.tstzrange:return pr(e);default:return pr(e)}},pr=n=>n,$c=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Mc=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},Lc=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},Vc=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let i;const o=n.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Co(e,a))}return n},Fc=n=>typeof n=="string"?n.replace(" ","T"):n,xo=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Wn{constructor(e,t,r={},s=Po){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Us;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Us||(Us={}));class Mt{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Mt.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Mt.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Mt.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const i=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(i,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const d=i[u];if(d){const h=c.map(m=>m.presence_ref),f=d.map(m=>m.presence_ref),p=c.filter(m=>f.indexOf(m.presence_ref)<0),g=d.filter(m=>h.indexOf(m.presence_ref)<0);p.length>0&&(a[u]=p),g.length>0&&(l[u]=g)}else a[u]=c}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(e,t,r,s){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var u;const c=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),c.length>0){const d=e[a].map(f=>f.presence_ref),h=c.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...h)}r(a,c,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),e[a]=u,s(a,u,l),u.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Bs;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Bs||(Bs={}));var qs;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(qs||(qs={}));var ge;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(ge||(ge={}));class qr{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=ie.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Wn(this,ue.join,this.params,this.timeout),this.rejoinTimer=new Oo(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ie.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ie.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ie.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ie.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ue.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Mt(this),this.broadcastEndpointURL=xo(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(c=>e==null?void 0:e(ge.CHANNEL_ERROR,c)),this._onClose(()=>e==null?void 0:e(ge.CLOSED));const l={},u={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:c})=>{var d;if(this.socket.setAuth(),c===void 0){e==null||e(ge.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,f=(d=h==null?void 0:h.length)!==null&&d!==void 0?d:0,p=[];for(let g=0;g<f;g++){const m=h[g],{filter:{event:v,schema:b,table:S,filter:w}}=m,_=c&&c[g];if(_&&_.event===v&&_.schema===b&&_.table===S&&_.filter===w)p.push(Object.assign(Object.assign({},m),{id:_.id}));else{this.unsubscribe(),e==null||e(ge.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(ge.SUBSCRIBED);return}}).receive("error",c=>{e==null||e(ge.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ge.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ie.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ue.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new Wn(this,ue.leave,{},e);s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,t,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Wn(this,e,t,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=ue;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,t,r);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var p,g,m;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((m=(g=f.filter)===null||g===void 0?void 0:g.event)===null||m===void 0?void 0:m.toLocaleLowerCase())===o}).map(f=>f.callback(h,r)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var p,g,m,v,b,S;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const w=f.id,_=(p=f.filter)===null||p===void 0?void 0:p.event;return w&&((g=t.ids)===null||g===void 0?void 0:g.includes(w))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((m=t.data)===null||m===void 0?void 0:m.type.toLocaleLowerCase()))}else{const w=(b=(v=f==null?void 0:f.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return w==="*"||w===((S=t==null?void 0:t.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const p=h.data,{schema:g,table:m,commit_timestamp:v,type:b,errors:S}=p;h=Object.assign(Object.assign({},{schema:g,table:m,commit_timestamp:v,eventType:b,new:{},old:{},errors:S}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===ie.closed}_isJoined(){return this.state===ie.joined}_isJoining(){return this.state===ie.joining}_isLeaving(){return this.state===ie.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&qr.isEqual(s.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ue.close,{},e)}_onError(e){this._on(ue.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ie.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Ns(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Ns(e.columns,e.old_record)),t}}const Nc=()=>{},Uc=typeof WebSocket<"u",Bc=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class qc{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=xc,this.params={},this.timeout=Po,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Nc,this.conn=null,this.sendBuffer=[],this.serializer=new Ic,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>it(async()=>{const{default:l}=await Promise.resolve().then(()=>dt);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${fr.websocket}`,this.httpEndpoint=xo(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Oo(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(Uc){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Kc(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),it(async()=>{const{default:e}=await import("./browser-39k180we.js").then(t=>t.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Dc}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case tt.connecting:return Le.Connecting;case tt.open:return Le.Open;case tt.closing:return Le.Closing;default:return Le.Closed}}isConnected(){return this.connectionState()===Le.Open}channel(e,t={config:{}}){const r=new qr(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let r=null;try{r=JSON.parse(atob(t.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=t,this.channels.forEach(s=>{t&&s.updateJoinPayload({access_token:t}),s.joinedOnce&&s._isJoined()&&s._push(ue.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Rc,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:s,payload:i,ref:o}=t;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(ue.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([Bc],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class Kc{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=tt.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class Kr extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function K(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class zc extends Kr{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class gr extends Kr{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Gc=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const Do=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>it(async()=>{const{default:r}=await Promise.resolve().then(()=>dt);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Wc=()=>Gc(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield it(()=>Promise.resolve().then(()=>dt),void 0)).Response:Response}),mr=n=>{if(Array.isArray(n))return n.map(t=>mr(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const s=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=mr(r)}),e};var Be=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const Hn=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Hc=(n,e,t)=>Be(void 0,void 0,void 0,function*(){const r=yield Wc();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(s=>{e(new zc(Hn(s),n.status||500))}).catch(s=>{e(new gr(Hn(s),s))}):e(new gr(Hn(n),n))}),Jc=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),t))};function Ht(n,e,t,r,s,i){return Be(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,Jc(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Hc(l,a,r))})})}function On(n,e,t,r){return Be(this,void 0,void 0,function*(){return Ht(n,"GET",e,t,r)})}function Pe(n,e,t,r,s){return Be(this,void 0,void 0,function*(){return Ht(n,"POST",e,r,s,t)})}function Yc(n,e,t,r,s){return Be(this,void 0,void 0,function*(){return Ht(n,"PUT",e,r,s,t)})}function Xc(n,e,t,r){return Be(this,void 0,void 0,function*(){return Ht(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function Ro(n,e,t,r,s){return Be(this,void 0,void 0,function*(){return Ht(n,"DELETE",e,r,s,t)})}var ee=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const Qc={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ks={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Zc{constructor(e,t={},r,s){this.url=e,this.headers=t,this.bucketId=r,this.fetch=Do(s)}uploadOrUpdate(e,t,r,s){return ee(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Ks),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const u=this._removeEmptyFolders(t),c=this._getFinalPath(u),d=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield d.json();return d.ok?{data:{path:u,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(K(i))return{data:null,error:i};throw i}})}upload(e,t,r){return ee(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return ee(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:Ks.upsert},s),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:c}),h=yield d.json();return d.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(K(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return ee(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=yield Pe(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Kr("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(K(r))return{data:null,error:r};throw r}})}update(e,t,r){return ee(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return ee(this,void 0,void 0,function*(){try{return{data:yield Pe(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(K(s))return{data:null,error:s};throw s}})}copy(e,t,r){return ee(this,void 0,void 0,function*(){try{return{data:{path:(yield Pe(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(K(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return ee(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Pe(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(K(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return ee(this,void 0,void 0,function*(){try{const s=yield Pe(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(K(s))return{data:null,error:s};throw s}})}download(e,t){return ee(this,void 0,void 0,function*(){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield On(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(K(a))return{data:null,error:a};throw a}})}info(e){return ee(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield On(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:mr(r),error:null}}catch(r){if(K(r))return{data:null,error:r};throw r}})}exists(e){return ee(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Xc(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(K(r)&&r instanceof gr){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&s.push(i);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(e){return ee(this,void 0,void 0,function*(){try{return{data:yield Ro(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(K(t))return{data:null,error:t};throw t}})}list(e,t,r){return ee(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Qc),t),{prefix:e||""});return{data:yield Pe(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(K(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const ed="2.7.1",td={"X-Client-Info":`storage-js/${ed}`};var We=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};class nd{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},td),t),this.fetch=Do(r)}listBuckets(){return We(this,void 0,void 0,function*(){try{return{data:yield On(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(K(e))return{data:null,error:e};throw e}})}getBucket(e){return We(this,void 0,void 0,function*(){try{return{data:yield On(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(K(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return We(this,void 0,void 0,function*(){try{return{data:yield Pe(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(K(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return We(this,void 0,void 0,function*(){try{return{data:yield Yc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(K(r))return{data:null,error:r};throw r}})}emptyBucket(e){return We(this,void 0,void 0,function*(){try{return{data:yield Pe(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(K(t))return{data:null,error:t};throw t}})}deleteBucket(e){return We(this,void 0,void 0,function*(){try{return{data:yield Ro(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(K(t))return{data:null,error:t};throw t}})}}class rd extends nd{constructor(e,t={},r){super(e,t,r)}from(e){return new Zc(this.url,this.headers,e,this.fetch)}}const sd="2.48.0";let Ct="";typeof Deno<"u"?Ct="deno":typeof document<"u"?Ct="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ct="react-native":Ct="node";const id={"X-Client-Info":`supabase-js-${Ct}/${sd}`},od={headers:id},ad={schema:"public"},ld={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ud={};var cd=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const dd=n=>{let e;return n?e=n:typeof fetch>"u"?e=wo:e=fetch,(...t)=>e(...t)},hd=()=>typeof Headers>"u"?So:Headers,fd=(n,e,t)=>{const r=dd(t),s=hd();return(i,o)=>cd(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:n;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",n),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var pd=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};function gd(n){return n.replace(/\/$/,"")}function md(n,e){const{db:t,auth:r,realtime:s,global:i}=n,{db:o,auth:a,realtime:l,global:u}=e,c={db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),s),global:Object.assign(Object.assign({},u),i),accessToken:()=>pd(this,void 0,void 0,function*(){return""})};return n.accessToken?c.accessToken=n.accessToken:delete c.accessToken,c}const Io="2.67.3",yd="http://localhost:9999",vd="supabase.auth.token",_d={"X-Client-Info":`gotrue-js/${Io}`},zs=10,yr="X-Supabase-Api-Version",jo={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function bd(n){return Math.round(Date.now()/1e3)+n}function wd(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const de=()=>typeof window<"u"&&typeof document<"u",je={tested:!1,writable:!1},Lt=()=>{if(!de())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(je.tested)return je.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),je.tested=!0,je.writable=!0}catch{je.tested=!0,je.writable=!1}return je.writable};function Sd(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return t.searchParams.forEach((r,s)=>{e[s]=r}),e}const $o=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>it(async()=>{const{default:r}=await Promise.resolve().then(()=>dt);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Td=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Mo=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},an=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},ln=async(n,e)=>{await n.removeItem(e)};function Ed(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",r,s,i,o,a,l,u,c=0;for(n=n.replace("-","+").replace("_","/");c<n.length;)o=e.indexOf(n.charAt(c++)),a=e.indexOf(n.charAt(c++)),l=e.indexOf(n.charAt(c++)),u=e.indexOf(n.charAt(c++)),r=o<<2|a>>4,s=(a&15)<<4|l>>2,i=(l&3)<<6|u,t=t+String.fromCharCode(r),l!=64&&s!=0&&(t=t+String.fromCharCode(s)),u!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class In{constructor(){this.promise=new In.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}In.promiseConstructor=Promise;function Gs(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(Ed(r))}async function Ad(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function kd(n,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await n(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function Pd(n){return("0"+n.toString(16)).substr(-2)}function Od(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,Pd).join("")}async function Cd(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}function xd(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Dd(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await Cd(n);return xd(t)}async function He(n,e,t=!1){const r=Od();let s=r;t&&(s+="/PASSWORD_RECOVERY"),await Mo(n,`${e}-code-verifier`,s);const i=await Dd(r);return[i,r===i?"plain":"s256"]}const Rd=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Id(n){const e=n.headers.get(yr);if(!e||!e.match(Rd))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class zr extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function x(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class jd extends zr{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function $d(n){return x(n)&&n.name==="AuthApiError"}class Lo extends zr{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class qe extends zr{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class Ee extends qe{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Md(n){return x(n)&&n.name==="AuthSessionMissingError"}class Jn extends qe{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class un extends qe{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class cn extends qe{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ld(n){return x(n)&&n.name==="AuthImplicitGrantRedirectError"}class Ws extends qe{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class vr extends qe{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Yn(n){return x(n)&&n.name==="AuthRetryableFetchError"}class Hs extends qe{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}var Vd=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const Me=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Fd=[502,503,504];async function Js(n){var e;if(!Td(n))throw new vr(Me(n),0);if(Fd.includes(n.status))throw new vr(Me(n),n.status);let t;try{t=await n.json()}catch(i){throw new Lo(Me(i),i)}let r;const s=Id(n);if(s&&s.getTime()>=jo["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new Hs(Me(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ee}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Hs(Me(t),n.status,t.weak_password.reasons);throw new jd(Me(t),n.status||500,r)}const Nd=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function R(n,e,t,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[yr]||(i[yr]=jo["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Ud(n,e,t+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function Ud(n,e,t,r,s,i){const o=Nd(e,r,s,i);let a;try{a=await n(t,Object.assign({},o))}catch(l){throw console.error(l),new vr(Me(l),0)}if(a.ok||await Js(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Js(l)}}function Ae(n){var e;let t=null;zd(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=bd(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function Ys(n){const e=Ae(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Ce(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Bd(n){return{data:n,error:null}}function qd(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i}=n,o=Vd(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Kd(n){return n}function zd(n){return n.access_token&&n.refresh_token&&n.expires_in}var Gd=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};class Wd{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=$o(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await R(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(x(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await R(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ce})}catch(r){if(x(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Gd(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await R(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:qd,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(x(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await R(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ce})}catch(t){if(x(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await R(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Kd});if(c.error)throw c.error;const d=await c.json(),h=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(p=>{const g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(p.split(";")[1].split("=")[1]);u[`${m}Page`]=g}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(x(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await R(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ce})}catch(t){if(x(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await R(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Ce})}catch(r){if(x(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await R(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Ce})}catch(r){if(x(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await R(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(x(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await R(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(x(t))return{data:null,error:t};throw t}}}const Hd={getItem:n=>Lt()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{Lt()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{Lt()&&globalThis.localStorage.removeItem(n)}};function Xs(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function Jd(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Je={debug:!!(globalThis&&Lt()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Vo extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Yd extends Vo{}async function Xd(n,e,t){Je.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Je.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Je.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return await t()}finally{Je.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw Je.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Yd(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Je.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}Jd();const Qd={url:yd,storageKey:vd,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:_d,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Et=30*1e3,Qs=3;async function Zs(n,e,t){return await t()}class Ut{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ut.nextInstanceID,Ut.nextInstanceID+=1,this.instanceID>0&&de()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Qd),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Wd({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=$o(s.fetch),this.lock=s.lock||Zs,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:de()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Xd:this.lock=Zs,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Lt()?this.storage=Hd:(this.memoryStorage={},this.storage=Xs(this.memoryStorage)):(this.memoryStorage={},this.storage=Xs(this.memoryStorage)),de()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Io}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Sd(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),de()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(t,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Ld(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return x(t)?{error:t}:{error:new Lo("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const i=await R(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ae}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(x(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,r,s;try{let i;if("email"in e){const{email:c,password:d,options:h}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await He(this.storage,this.storageKey)),i=await R(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:c,password:d,data:(t=h==null?void 0:h.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:p},xform:Ae})}else if("phone"in e){const{phone:c,password:d,options:h}=e;i=await R(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Ae})}else throw new un("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(x(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:o,options:a}=e;t=await R(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ys})}else if("phone"in e){const{phone:i,password:o,options:a}=e;t=await R(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ys})}else throw new un("You must provide either an email or phone number and a password");const{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Jn}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(t){if(x(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await an(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(t??"").split("/");try{const{data:i,error:o}=await R(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Ae});if(await ln(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Jn}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(x(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:i,nonce:o}=e,a=await R(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Ae}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Jn}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(t){if(x(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await He(this.storage,this.storageKey));const{error:d}=await R(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:c}=await R(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new un("You must provide either an email or phone number.")}catch(a){if(x(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,r;try{let s,i;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await R(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Ae});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(x(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await He(this.storage,this.storageKey)),await R(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Bd})}catch(i){if(x(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Ee;const{error:s}=await R(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(x(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await R(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await R(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new un("You must provide either an email or phone number and a type")}catch(t){if(x(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await an(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await R(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ce}):await this._useSession(async t=>{var r,s,i;const{data:o,error:a}=t;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ee}:await R(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Ce})})}catch(t){if(x(t))return Md(t)&&(await this._removeSession(),await ln(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Ee;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await He(this.storage,this.storageKey));const{data:u,error:c}=await R(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Ce});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(x(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return Gs(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ee;const t=Date.now()/1e3;let r=t,s=!0,i=null;const o=Gs(e.access_token);if(o.exp&&(r=o.exp,s=r<=t),s){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(x(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ee;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(x(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!de())throw new cn("No browser detected.");if(e.error||e.error_description||e.error_code)throw new cn(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Ws("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new cn("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ws("No code detected.");const{data:b,error:S}=await this._exchangeCodeForSession(e.code);if(S)throw S;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!i||!a||!o||!u)throw new cn("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(a);let h=c+d;l&&(h=parseInt(l));const f=h-c;f*1e3<=Et&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const p=h-d;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,h,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,h,c);const{data:g,error:m}=await this._getUser(i);if(m)throw m;const v={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:h,refresh_token:o,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(r){if(x(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await an(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!($d(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await ln(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=wd(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:i},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await He(this.storage,this.storageKey,!0));try{return await R(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(x(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(x(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,u,c;const{data:d,error:h}=i;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await R(this.fetch,"GET",f,{headers:this.headers,jwt:(c=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(s)throw s;return de()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(x(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:o}=t;if(o)throw o;return await R(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(x(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await kd(async s=>(s>0&&await Ad(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await R(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ae})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Yn(i)&&Date.now()+o-r<Et})}catch(r){if(this._debug(t,"error",r),x(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),de()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await an(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const s=Math.round(Date.now()/1e3),i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<s+zs;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${zs}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),Yn(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Ee;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new In;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Ee;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),x(i)){const o={session:null,error:i};return Yn(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Mo(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await ln(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&de()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Et);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Et);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Et}ms, refresh threshold is ${Qs} ticks`),s<=Qs&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Vo)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!de()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await He(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await R(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(x(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await R(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(x(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:a}=await R(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(x(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await R(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(x(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}}Ut.nextInstanceID=0;const Zd=Ut;class eh extends Zd{constructor(e){super(e)}}var th=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};class nh{constructor(e,t,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=gd(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:ad,realtime:ud,auth:Object.assign(Object.assign({},ld),{storageKey:l}),global:od},c=md(r??{},u);this.storageKey=(s=c.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=c.global.headers)!==null&&i!==void 0?i:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=c.auth)!==null&&o!==void 0?o:{},this.headers,c.global.fetch),this.fetch=fd(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new Oc(`${a}/rest/v1`,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),c.accessToken||this._listenForAuthEvents()}get functions(){return new pc(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new rd(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return th(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:l},u,c){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new eh({url:this.authUrl,headers:Object.assign(Object.assign({},d),u),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:l,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new qc(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const rh=(n,e,t)=>new nh(n,e,t),ht=rh("https://nbodsrunndqzztsvilcc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5ib2RzcnVubmRxenp0c3ZpbGNjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzc2MTgyMDUsImV4cCI6MjA1MzE5NDIwNX0.mYnhoewTWWhA47PtEMXiqW9bx6zTkQN19GKCoQjGzk8");let Gr=[],Bt=null;async function sh(){const{data:n,error:e}=await ht.auth.signInWithPassword({email:"sixten@chas.at",password:"nndqzzts"});if(e)throw new Error(e.message);Bt=n.user,console.log(n),document.querySelector("header button.sign-in").style.visibility="hidden",document.querySelector("header button.sign-out").style.visibility="visible",oh()}async function ih(){const{error:n}=await ht.from("todos").delete().eq("user_id",Bt.id);if(n)throw new Error(n.message)}async function oh(){const{data:n,error:e}=await ht.from("todos").select("*").order("created_at",{ascending:!0}).eq("user_id",Bt.id);if(e)throw new Error(e.message);Gr=n,Fo()}function ah(n){return`
        <li class="todo">
            ${n.completed?'<div class="icon-circle-check"></div>':'<div class="icon-circle"></div>'}
            <p class="text">${n.text}</p>
            <div class="icon-grip-vertical todo-icon"/>
        </li>
    `}function Fo(){const n=Gr.map(ah).reverse().join("");document.querySelector(".todos").innerHTML=n;const e=document.querySelector(".todos");A.create(e,{animation:300,handle:".icon-grip-vertical",group:"todos-order",store:{get:()=>{const t=localStorage.getItem("todos-order");return t?t.split("|"):[]},set:t=>{const r=t.toArray();localStorage.setItem("todos-order",r.join("|"))}}})}async function No(){if(!Bt)return;const n=document.querySelector(".add-todo textarea").value;if(n.trim()==="")return;const e={id:fa(),text:n,completed:!1,created_at:new Date,user_id:Bt.id},{error:t}=await ht.from("todos").insert([e]);if(t)throw new Error(t.message);Gr.push(e),document.querySelector(".add-todo textarea").value="",Fo(),oc(".todo:first-of-type",{scale:[.9,1],opacity:[0,1]},{ease:"circInOut",duration:.3})}var ei;(ei=document.querySelector(".add-todo textarea"))==null||ei.addEventListener("keydown",n=>{n.key==="Enter"&&(n.preventDefault(),No())});var ti;(ti=document.querySelector(".add-todo button"))==null||ti.addEventListener("click",No);var ni;(ni=document.querySelector("header h1"))==null||ni.addEventListener("click",async()=>{await ih(),document.querySelector(".todos").innerHTML=""});var ri;(ri=document.querySelector(".sign-in"))==null||ri.addEventListener("click",async()=>{console.log("sign-in"),await sh()});var si;(si=document.querySelector("header button.sign-out"))==null||si.addEventListener("click",async()=>{await ht.auth.signOut()});ht.auth.onAuthStateChange(async n=>{console.log("onAuthStateChange",n)});export{gc as g};
